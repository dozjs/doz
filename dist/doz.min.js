function bind$1(e,t){if("object"!=typeof e||null==e)throw new TypeError("expected an object!");let n=Object.assign({},e),o=Object.keys(e);for(let e=o.length-1;e>=0;--e){let a=n[o[e]];"function"==typeof a?n[o[e]]=a.bind(t):"object"==typeof a&&null!=a&&(n[o[e]]=bind$1(a,t))}return n}const regexN=/\n/g,regexS=/\s+/g,replace=" ";let decoder;const html={create(e,t){let n;e=(e=e.replace(regexN,replace)).replace(regexS,replace);let o=document.createElement("div");return o.innerHTML=e,t&&o.childNodes.length>1?(n=document.createElement(t),n.innerHTML=o.innerHTML):n=o.firstChild||document.createTextNode(""),n},decode:e=>(decoder=decoder||document.createElement("div"),decoder.innerHTML=e,decoder.textContent)},COMPONENT_DYNAMIC_INSTANCE="componentDynamicInstance",COMPONENT_INSTANCE="componentInstance",COMPONENT_ROOT_INSTANCE="componentRootInstance",PROPS_ATTRIBUTES="props",ALREADY_WALKED="walked",DEFAULT_SLOT_KEY="__default__",NS={SVG:"http://www.w3.org/2000/svg"},TAG={ROOT:"dz-root",EACH:"dz-each-root",APP:"dz-app",EMPTY:"dz-empty",MOUNT:"dz-mount",SLOT:"dz-slot",SLOT_UPPERCASE:"DZ-SLOT",SUFFIX_ROOT:"-root",TEXT_NODE_PLACE:"dz-text-node",ITERATE_NODE_PLACE:"dz-iterate-node"},REGEX={IS_DIRECTIVE:/^d[-:][\w-]+$/,IS_CUSTOM_TAG:/^\w+-[\w-]+$/,IS_CUSTOM_TAG_STRING:/<\w+-[\w-]+/,IS_LISTENER:/^on/,IS_ID_SELECTOR:/^#[\w-_:.]+$/,IS_PARENT_METHOD:/^parent.(.*)/,IS_STRING_QUOTED:/^"\w+"/,IS_SVG:/^svg$/,GET_LISTENER:/^this.(.*)\((.*)\)/,GET_LISTENER_SCOPE:/^scope.(.*)\((.*)\)/,IS_LISTENER_SCOPE:/(^|\()scope[.)]/g,TRIM_QUOTES:/^["'](.*)["']$/,THIS_TARGET:/\B\$this(?!\w)/g,HTML_MARKUP:/<!--[^]*?(?=-->)-->|<(\/?)([a-z][-.0-9_a-z]*)\s*([^>]*?)(\/?)>|<\/>/gi,HTML_ATTRIBUTE:/(^|\s)([\w-:]+)(\s*=\s*("([^"]+)"|'([^']+)'|(\S+)))?/gi,MATCH_NLS:/\n\s+/gm,REPLACE_QUOT:/"/g,REPLACE_D_DIRECTIVE:/^d[-:]/,EXTRACT_STYLE_DISPLAY_PROPERTY:/display(?:\s+)?:(?:\s+)?([\w-]+)/},ATTR={FORCE_UPDATE:"forceupdate"},components={},webComponents={tags:{},ids:{}},plugins=[],directives$1={},directivesKeys=[];var data={components:components,webComponents:webComponents,plugins:plugins,directives:directives$1,directivesKeys:directivesKeys};function registerComponent(e){const t=e.tag.toUpperCase();Object.prototype.hasOwnProperty.call(data.components,t)&&console.warn("Doz",`component ${t} overwritten`),data.components[t]=e}function removeAll(){data.components={}}function getComponent(e){return e=e.toUpperCase(),data.components[e]}function registerPlugin(e){data.plugins.push(e)}function registerDirective(e,t={}){if("string"!=typeof e)throw new TypeError("Doz directive name must be a string");if("object"!=typeof t||!t)throw new TypeError("Doz directive config must be an object");":"===e[0]&&(t._onlyDozComponent=!0,e=e.substr(1));let n=[];-1!==(e=e.toLowerCase()).indexOf("-")&&(n=e.split("-"),e=n[0],n.shift()),t.name=e,t._keyArguments=n.map((e=>e.substr(1))),Object.prototype.hasOwnProperty.call(data.directives,e)&&console.warn("Doz",`directive ${e} overwritten`),data.directives[e]=t,data.directivesKeys.includes(e)||data.directivesKeys.push(e)}var collection={registerComponent:registerComponent,registerPlugin:registerPlugin,getComponent:getComponent,registerDirective:registerDirective,removeAll:removeAll,data:data};let d=window.setTimeout.bind(window);window.requestAnimationFrame&&(d=window.requestAnimationFrame.bind(window));var delay=d;function callMethod$1(...e){let t,n=e.shift(),o=data.directivesKeys;for(let n=0;n<e.length;n++)if("function"==typeof e[n]){t=e[n];break}for(let a=0;a<o.length;a++){let r=o[a];if(data.directives[r]/*!== undefined*/&&data.directives[r][n]/*!== undefined*/){let o=data.directives[r][n].apply(data.directives[r],e);void 0!==o&&t&&t(o)}}}function callAppInit(...e){let t=["onAppInit"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentCreate(...e){let t=["onAppComponentCreate"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentBeforeCreate(...e){let t=["onAppComponentBeforeCreate"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentConfigCreate(...e){let t=["onAppComponentConfigCreate"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentBeforeMount(...e){let t=["onAppComponentBeforeMount"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentMount(...e){let t=["onAppComponentMount"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentMountAsync(...e){let t=["onAppComponentMountAsync"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentBeforeUpdate(...e){let t=["onAppComponentBeforeUpdate"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentUpdate(...e){let t=["onAppComponentUpdate"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentDrawByParent(...e){let t=["onAppComponentDrawByParent"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentAfterRender(...e){let t=["onAppComponentAfterRender"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentBeforeUnmount(...e){let t=["onAppComponentBeforeUnmount"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentUnmount(...e){let t=["onAppComponentUnmount"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentBeforeDestroy(...e){let t=["onAppComponentBeforeDestroy"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentSetConfig(...e){let t=["onAppComponentSetConfig"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentSetProps(...e){let t=["onAppComponentSetProps"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentLoadProps(...e){let t=["onAppComponentLoadProps"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentDestroy(...e){let t=["onAppComponentDestroy"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentAssignIndex(...e){let t=["onAppComponentAssignIndex"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppWalkDOM(...e){let t=["onAppWalkDOM"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentAssignName(...e){let t=["onAppComponentAssignName"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentPropsAssignName(...e){let t=["onAppComponentPropsAssignName"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppDOMElementCreate(...e){let t=["onAppDOMElementCreate"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppDynamicInstanceCreate(...e){let t=["onAppDynamicInstanceCreate"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentRenderOverwrite(...e){let t=["onAppComponentRenderOverwrite"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}function callAppComponentWaitMount(...e){let t=["onAppComponentWaitMount"];Array.prototype.push.apply(t,e),callMethod$1.apply(null,t)}var app={callAppInit:callAppInit,callAppComponentCreate:callAppComponentCreate,callAppComponentLoadProps:callAppComponentLoadProps,callAppComponentSetConfig:callAppComponentSetConfig,callAppComponentSetProps:callAppComponentSetProps,callAppComponentDestroy:callAppComponentDestroy,callAppComponentAssignIndex:callAppComponentAssignIndex,callAppComponentBeforeCreate:callAppComponentBeforeCreate,callAppComponentConfigCreate:callAppComponentConfigCreate,callAppComponentBeforeMount:callAppComponentBeforeMount,callAppComponentMount:callAppComponentMount,callAppComponentBeforeDestroy:callAppComponentBeforeDestroy,callAppComponentUnmount:callAppComponentUnmount,callAppComponentBeforeUnmount:callAppComponentBeforeUnmount,callAppComponentAfterRender:callAppComponentAfterRender,callAppComponentDrawByParent:callAppComponentDrawByParent,callAppComponentUpdate:callAppComponentUpdate,callAppComponentBeforeUpdate:callAppComponentBeforeUpdate,callAppComponentMountAsync:callAppComponentMountAsync,callAppWalkDOM:callAppWalkDOM,callAppComponentAssignName:callAppComponentAssignName,callAppDOMElementCreate:callAppDOMElementCreate,callAppDynamicInstanceCreate:callAppDynamicInstanceCreate,callAppComponentPropsAssignName:callAppComponentPropsAssignName,callAppComponentRenderOverwrite:callAppComponentRenderOverwrite,callAppComponentWaitMount:callAppComponentWaitMount};function extractDirectivesFromProps(e){let t;return t=Object.keys(e.props).length?e.props:e._rawProps,Object.keys(t).forEach((n=>{if(isDirective(n)){let o=n.replace(REGEX.REPLACE_D_DIRECTIVE,"");e._directiveProps[o]=t[n]}})),e._directiveProps}function isDirective(e){return"d"===e[0]&&("-"===e[1]||":"===e[1])}function extractStyleDisplayFromDozProps(e){if(!e._dozAttach[PROPS_ATTRIBUTES]||!e._dozAttach[PROPS_ATTRIBUTES].style)return null;let t=e._dozAttach[PROPS_ATTRIBUTES].style.match(REGEX.EXTRACT_STYLE_DISPLAY_PROPERTY);return t?t[1]:null}function extractDirectiveNameAndKeyValues(e){let t=e=e.replace(REGEX.REPLACE_D_DIRECTIVE,""),n=[];return-1!==t.indexOf("-")&&(n=t.split("-"),t=n[0],n.shift()),[t,n]}function callMethod(...e){let t=e[0],n=e[1];e.shift();let o=extractDirectivesFromProps(n);Object.keys(o).forEach((n=>{let a=[],r={},p=n;-1!==n.indexOf("-")&&(a=n.split("-"),n=a[0],a.shift());let l=data.directives[n];if(l&&"function"==typeof l[t]){let n=Object.assign([],e);n.push(o[p]),l._keyArguments.forEach(((e,t)=>r[e]=a[t])),n.push(r),l[t].apply(l,n)}}))}function callComponentBeforeCreate(...e){let t=["onComponentBeforeCreate"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentCreate(...e){let t=["onComponentCreate"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentBeforeMount(...e){let t=["onComponentBeforeMount"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentMount(...e){let t=["onComponentMount"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentMountAsync(...e){let t=["onComponentMountAsync"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentAfterRender(...e){let t=["onComponentAfterRender"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentBeforeUpdate(...e){let t=["onComponentBeforeUpdate"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentUpdate(...e){let t=["onComponentUpdate"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentBeforeUnmount(...e){let t=["onComponentBeforeUnmount"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentUnmount(...e){let t=["onComponentUnmount"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentBeforeDestroy(...e){let t=["onComponentBeforeDestroy"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentDestroy(...e){let t=["onComponentDestroy"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentLoadProps(...e){let t=["onComponentLoadProps"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentWaitMount(...e){let t=["onComponentWaitMount"];Array.prototype.push.apply(t,e),callMethod.apply(null,t)}function callComponentDOMElementCreate(e,t,n){let o="onComponentDOMElementCreate";if(!t._dozAttach[PROPS_ATTRIBUTES])return;let a=Object.keys(t._dozAttach[PROPS_ATTRIBUTES]);for(let r=0;r<a.length;r++){let p=a[r],l=t._dozAttach[PROPS_ATTRIBUTES][a[r]];if(isDirective(p)){let[a,r]=extractDirectiveNameAndKeyValues(p),i=l,c=data.directives[a];c&&c[o]&&c[o].apply(c,[e,t,i,n,r])}}}function callComponentDOMElementUpdate(e,t){let n="onComponentDOMElementUpdate";if(!t._dozAttach[PROPS_ATTRIBUTES])return;let o=Object.keys(t._dozAttach[PROPS_ATTRIBUTES]);for(let a=0;a<o.length;a++){let r=o[a],p=t._dozAttach[PROPS_ATTRIBUTES][o[a]];if(isDirective(r)){let[o,a]=extractDirectiveNameAndKeyValues(r),l=p,i=data.directives[o];i&&i[n]&&i[n].apply(i,[e,t,l,a])}}}function callComponentVNodeTick(e,t,n){if(!t||!t.props)return;let o="onComponentVNodeTick",a=Object.keys(t.props);for(let r=0;r<a.length;r++){let p=a[r];if(isDirective(p)){let[a,r]=extractDirectiveNameAndKeyValues(p),l=t.props[p],i=data.directives[a];i&&i[o]&&i[o].apply(i,[e,t,n,l,r])}}}var component$1={callComponentBeforeCreate:callComponentBeforeCreate,callComponentCreate:callComponentCreate,callComponentBeforeMount:callComponentBeforeMount,callComponentMount:callComponentMount,callComponentMountAsync:callComponentMountAsync,callComponentAfterRender:callComponentAfterRender,callComponentBeforeUpdate:callComponentBeforeUpdate,callComponentUpdate:callComponentUpdate,callComponentBeforeUnmount:callComponentBeforeUnmount,callComponentUnmount:callComponentUnmount,callComponentBeforeDestroy:callComponentBeforeDestroy,callComponentDestroy:callComponentDestroy,callComponentLoadProps:callComponentLoadProps,callComponentDOMElementCreate:callComponentDOMElementCreate,callComponentDOMElementUpdate:callComponentDOMElementUpdate,callComponentVNodeTick:callComponentVNodeTick,callComponentWaitMount:callComponentWaitMount};function directive$c(e,t={}){registerDirective(e,t)}var directives=Object.assign({directive:directive$c},app,component$1);function callBeforeCreate(e){if(directives.callAppComponentBeforeCreate(e),directives.callComponentBeforeCreate(e),"function"==typeof e.onBeforeCreate)return e.onBeforeCreate.call(e)}function callCreate(e){directives.callAppComponentCreate(e),directives.callComponentCreate(e),"function"==typeof e.onCreate&&e.onCreate.call(e),e.app.emit("componentCreate",e)}function callConfigCreate(e){directives.callAppComponentConfigCreate(e),"function"==typeof e.onConfigCreate&&e.onConfigCreate.call(e),e.parent&&"function"==typeof e.parent[e.__onConfigCreate]&&e.parent[e.__onConfigCreate].call(e.parent,e),e.app.emit("componentConfigCreate",e)}function callBeforeMount(e){if(directives.callAppComponentBeforeMount(e),directives.callComponentBeforeMount(e),"function"==typeof e.onBeforeMount)return e.onBeforeMount.call(e)}function callMount(e){directives.callAppComponentMount(e),directives.callComponentMount(e),"function"==typeof e.onMount&&e.onMount.call(e),e.app.emit("componentMount",e)}function callMountAsync(e){delay((()=>{directives.callAppComponentMountAsync(e),directives.callComponentMountAsync(e)})),"function"==typeof e.onMountAsync&&delay((()=>e.onMountAsync.call(e))),e.app.emit("componentMountAsync",e)}function callBeforeUpdate(e,t){if(directives.callAppComponentBeforeUpdate(e,t),directives.callComponentBeforeUpdate(e,t),"function"==typeof e.onBeforeUpdate)return e.onBeforeUpdate.call(e,t)}function callUpdate(e,t){directives.callAppComponentUpdate(e,t),directives.callComponentUpdate(e,t),"function"==typeof e.onUpdate&&e.onUpdate.call(e,t),e.app.emit("componentUpdate",e,t)}function callDrawByParent(e,t,n){if(e)return directives.callAppComponentDrawByParent(e,t,n),"function"==typeof e.onDrawByParent?e.onDrawByParent.call(e,t,n):e.parent&&"function"==typeof e.parent[e.__onDrawByParent]?e.parent[e.__onDrawByParent].call(e.parent,e,t,n):void 0}function callAfterRender(e,t){if(directives.callAppComponentAfterRender(e,t),directives.callComponentAfterRender(e,t),"function"==typeof e.onAfterRender)return e.onAfterRender.call(e,t)}function callBeforeUnmount(e){if(directives.callAppComponentBeforeUnmount(e),directives.callComponentBeforeUnmount(e),"function"==typeof e.onBeforeUnmount)return e.onBeforeUnmount.call(e)}function callUnmount(e){directives.callAppComponentUnmount(e),directives.callComponentUnmount(e),"function"==typeof e.onUnmount&&e.onUnmount.call(e),e.app.emit("componentUnmount",e)}function callBeforeDestroy(e){if(directives.callAppComponentBeforeDestroy(e),directives.callComponentBeforeDestroy(e),"function"==typeof e.onBeforeDestroy)return e.onBeforeDestroy.call(e)}function callDestroy(e){directives.callAppComponentDestroy(e),directives.callComponentDestroy(e),e.app.emit("componentDestroy",e);const t=document.getElementById(e.uId+"--style"),n=document.getElementById(e.uId+"--style-reset");t&&t.parentNode.removeChild(t),n&&n.parentNode.removeChild(n),e._unmountedPlaceholder&&e._unmountedPlaceholder.parentNode&&e._unmountedPlaceholder.parentNode.removeChild(e._unmountedPlaceholder),"function"==typeof e.onDestroy&&(e.onDestroy.call(e),e=null)}function callLoadProps(e){directives.callAppComponentLoadProps(e),directives.callComponentLoadProps(e),"function"==typeof e.onLoadProps&&e.onLoadProps.call(e),e.app.emit("componentLoadProps",e)}function callWaitMount(e){directives.callAppComponentWaitMount(e),directives.callComponentWaitMount(e),"function"==typeof e.onWaitMount&&e.onWaitMount.call(e),e.app.emit("componentWaitMount",e)}var hooks$1={callBeforeCreate:callBeforeCreate,callCreate:callCreate,callConfigCreate:callConfigCreate,callBeforeMount:callBeforeMount,callMount:callMount,callMountAsync:callMountAsync,callBeforeUpdate:callBeforeUpdate,callUpdate:callUpdate,callDrawByParent:callDrawByParent,callAfterRender:callAfterRender,callBeforeUnmount:callBeforeUnmount,callUnmount:callUnmount,callBeforeDestroy:callBeforeDestroy,callDestroy:callDestroy,callLoadProps:callLoadProps,callWaitMount:callWaitMount};function dashToCamel(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))}const kCache=new Map,tplCache=Object.create(null),hCache=new Map;var cacheStores={kCache:kCache,tplCache:tplCache,hCache:hCache};const regExcludeSpecial=new RegExp(`</?(${TAG.TEXT_NODE_PLACE}|${TAG.ITERATE_NODE_PLACE})?>$`),selfClosingElements={meta:!0,img:!0,link:!0,input:!0,area:!0,br:!0,hr:!0},elementsClosedByOpening={li:{li:!0},p:{p:!0,div:!0},td:{td:!0,th:!0},th:{td:!0,th:!0}},elementsClosedByClosing={li:{ul:!0,ol:!0},a:{div:!0},b:{div:!0},i:{div:!0},p:{div:!0},td:{tr:!0,table:!0},th:{tr:!0,table:!0}};function last(e){return e[e.length-1]}function removeNLS(e){return e.replace(REGEX.MATCH_NLS,"")}class Element{constructor(e,t,n,o,a){this.type=e,this.props=t,this.children=[],o&&(this.style=o),a&&(this.styleScoped=a),(n||"svg"===e)&&(this.isSVG=!0),void 0!==t.key&&(this.key=t.key)}appendChild(e){return e.props&&void 0!==e.props.key&&(this.hasKeys=!0),this.children.push(e),e}}function compile(e){if(!e)return"";if(tplCache[e])return tplCache[e];const t=new Element(null,{}),n=[t];let o,a,r=t,p=-1;for(;o=REGEX.HTML_MARKUP.exec(e);){if(p>-1&&p+o[0].length<REGEX.HTML_MARKUP.lastIndex){let t=removeNLS(e.substring(p,REGEX.HTML_MARKUP.lastIndex-o[0].length));t&&("style"===r.type&&void 0!==r.props["data-is-webcomponent"]&&(t=t.replace(/:(component|wrapper|root)/g,":host")),!0===r.style?r.style=t:(" e-0_"===t.substr(0,5)&&(t=t.trim()),r.appendChild(t)))}if(p=REGEX.HTML_MARKUP.lastIndex,"!"!==o[0][1]){if("</>"===o[0]){let e=last(n).type;e&&(o[0]=`</${e}>`,o[1]="/",o[2]=e)}if(!regExcludeSpecial.test(o[0])){if("slot"===o[2]&&(o[2]=TAG.SLOT),!o[1]&&o[0]){a={};for(let e;e=REGEX.HTML_ATTRIBUTE.exec(o[3]);)a[e[2]]=e[5]||e[6]||"",propsFixer(o[0].substring(1,o[0].length-1),e[2],a[e[2]],a,null);if(!o[4]&&elementsClosedByOpening[r.type]&&elementsClosedByOpening[r.type][o[2]]&&(n.pop(),r=last(n)),"style"===o[2]&&void 0===a["data-is-webcomponent"]){r.style=!0,""===a["data-scoped"]&&(r.styleScoped=!0);continue}r=r.appendChild(new Element(o[2],a,r.isSVG)),n.push(r)}if(o[1]||o[4]||selfClosingElements[o[2]])for(;;){if(r.type===o[2]){n.pop(),r=last(n);break}if(!elementsClosedByClosing[r.type]||!elementsClosedByClosing[r.type][o[2]])break;n.pop(),r=last(n)}}}}if(t.style&&"object"==typeof t.children[0]&&(t.children[0].style=t.style,t.children[0].styleScoped=t.styleScoped),t.children.length>1)t.type=TAG.ROOT;else if(t.children.length)return tplCache[e]=t.children[0],t.children[0];return tplCache[e]=t,t}function serializeProps(e){const t={};if(e._dozAttach[PROPS_ATTRIBUTES]){let n=Object.keys(e._dozAttach[PROPS_ATTRIBUTES]);for(let o=0;o<n.length;o++)propsFixer(e.nodeName,n[o],e._dozAttach[PROPS_ATTRIBUTES][n[o]],t,e)}else if(e.attributes){const n=Array.from(e.attributes);for(let o=n.length-1;o>=0;--o){let a=n[o];propsFixer(e.nodeName,a.name,a.nodeValue,t,e)}}return t}function propsFixer(e,t,n,o,a){"string"==typeof n&&REGEX.IS_STRING_QUOTED.test(n)&&(n=n.replace(REGEX.REPLACE_QUOT,"&quot;"));let r=isDirective(t),p=REGEX.IS_CUSTOM_TAG.test(e)&&!r?dashToCamel(t):t;a&&directives.callAppComponentPropsAssignName(a,t,n,r,o,(e=>{p=e})),o[p]=t===ATTR.FORCE_UPDATE||n}function hmr(e,t){if(!t||!t.hot)return;const n="__doz_hmr_props_store__",o="__doz_hmr_init_props_store__";window[n]=window[n]||{},window[o]=window[o]||{};const a=t.id;window[n][a]=window[n][a]||new Map,window[o][a]=window[o][a]||new Map,Object.keys(e.props).forEach((t=>{e._initialProps[t]===window[o][a].get(t)?e.props[t]=window[n][a].get(t)||e.props[t]:e.props[t]=e._initialProps[t]})),t.hot.dispose((()=>{Object.keys(e.props).forEach((t=>{window[n][a].set(t,e.props[t]),window[o][a].set(t,e._initialProps[t])}))}))}function encode(e){return"string"==typeof e?e.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&grave;"):e}function decode(e){return"string"==typeof e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&grave;/g,"`"):e}var stringDecoder={encode:encode,decode:decode};const ObservableSlim=function(){let e=[],t=[],n=[],o=null,a=function(r,p,l,i){let c=null==p,s=l||null,d=i||"",u=[],m=function(e,t){return e instanceof Array?""!==d?d:t:""!==d?d+"."+t:t},h=0,f=function(e){if(!0!==s.paused)if(c&&(p=++h>1,delay((function(){h=0}))),!0===p)delay((function(){if(e===u.length){for(let e=0;e<s.observers.length;e++)s.observers[e](u);u=[]}}));else{for(let e=0;e<s.observers.length;e++)s.observers[e](u);u=[]}},y={get:function(e,t){if("__getTarget"===t)return e;if("__isProxy"===t)return!0;if("__getParent"===t)return function(t){void 0===t&&(t=1);let n=m(e,"__getParent").split(".");return n.splice(-(t+1),t+1),function(e,t){return t.split(".").reduce((function(e,t){return e?e[t]:void 0}),e||self)}(s.parentProxy,n.join("."))};if("__getPath"===t){return m(e,"__getParent").slice(0,-12)}if("prototype"===t)return e[t];let n=e[t];if(e instanceof Date&&n instanceof Function)return n.bind(e);if(n instanceof Object&&e.hasOwnProperty(t)){!0===n.__isProxy&&(n=n.__getTarget);let e=-1,o=s.targets;for(let t=0,a=o.length;t<a;t++)if(n===o[t]){e=t;break}return e>-1?s.proxies[e]:a(n,p,s,""!==d?d+"."+t:t)}{let e=s.renderMode?stringDecoder.encode(n):n,o=s.manipulate;return"function"==typeof o&&(e=o(e,t,!0)),e}},deleteProperty:function(e,a){let r=!0;o===C&&(r=!1,o=null);let p=Object.assign({},e),l=m(e,a);if(!s.paused){if(u.push({type:"delete",target:e,property:a,newValue:null,previousValue:p[a],currentPath:l,proxy:C}),"function"==typeof s.beforeChange&&s.checkBeforeChange!==l){if(s.checkBeforeChange=l,!1===s.beforeChange(u))return s.checkBeforeChange="",!0}s.checkBeforeChange=""}if(!0===r){let r,p;for(r=0,p=t.length;r<p&&e!==t[r];r++);let l=n[r]||[],i=l.length;for(;i--;)l[i].proxy!==C&&(o=l[i].proxy,delete l[i].proxy[a]);delete e[a]}return f(u.length),!0},set:function(e,a,r,p){let l=!0;o===C&&(l=!1,o=null);let i=e[a];if(i!==r||!1===l){let c=typeof i,d=m(e,a),h="update";"undefined"===c&&(h="add");let y=s.manipulate;if("function"==typeof y&&(r=y(r,d,!1)),!s.paused){if(u.push({type:h,target:e,property:a,newValue:r,previousValue:p[a],currentPath:d,proxy:C}),"function"==typeof s.beforeChange&&s.checkBeforeChange!==d){if(s.checkBeforeChange=d,!1===s.beforeChange(u))return s.checkBeforeChange="",!0}s.checkBeforeChange=""}if(!0===l){let p,l;for(p=0,l=t.length;p<l&&e!==t[p];p++);let i=n[p];if(i)for(let e=0,t=i.length;e<t;e++)i[e].proxy!==C&&(o=i[e].proxy,i[e].proxy[a]=r);e[a]=r,r instanceof Object&&null!==r&&function e(t){let n=t.__getTarget,o=Object.keys(n);for(let a=0,r=o.length;a<r;a++){let r=o[a];n[r]instanceof Object&&null!==n[r]&&e(t[r])}}(C[a])}f(u.length)}return!0}},C=new Proxy(r,y);null===s?(s={parentTarget:r,domDelay:p,parentProxy:C,observers:[],targets:[r],proxies:[C],path:d},e.push(s)):(s.targets.push(r),s.proxies.push(C));let _={target:r,proxy:C,observable:s},A=-1;for(let e=0,n=t.length;e<n;e++)if(r===t[e]){A=e;break}return A>-1?n[A].push(_):(t.push(r),n.push([_])),C};return{create:function(e,t,n,o){!0===e.__isProxy&&(e=e.__getTarget);let r=a(e,t);return"function"==typeof n&&this.observe(r,n),function e(t){let n=t.__getTarget,a=Object.keys(n);for(let r=0,p=a.length;r<p;r++){let p=a[r];"function"==typeof o&&o(n,p),n[p]instanceof Object&&null!==n[p]&&e(t[p])}}(r),r},observe:function(t,n){let o=e.length;for(;o--;)if(e[o].parentProxy===t){e[o].observers.push(n);break}},remove:function(o){let a=null,r=!1,p=e.length;for(;p--;)if(e[p].parentProxy===o){a=e[p],r=!0;break}let l=n.length;for(;l--;){let e=n[l].length;for(;e--;)n[l][e].observable===a&&(n[l].splice(e,1),0===n[l].length&&(t[l]=null))}!0===r&&e.splice(p,1)},manipulate:function(t,n){if("function"!=typeof n)throw new Error("callback is required");let o=e.length;for(;o--;)if(e[o].parentProxy===t){e[o].manipulate=n;break}},beforeChange:function(t,n){if("function"!=typeof n)throw new Error("callback is required");let o=e.length;for(;o--;)if(e[o].parentProxy===t){e[o].beforeChange=n;break}},beginRender:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].renderMode=!0;break}},endRender:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].renderMode=!1;break}},pause:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].paused=!0;break}},resume:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].paused=!1;break}}}}();function propsListener(e,t){if("object"==typeof e.propsListener)for(let n=0;n<t.length;n++){const o=t[n],a=e.propsListener[o.currentPath];if("update"===o.type&&a){const t=e[a]||a;"function"==typeof t&&t.call(e,o.newValue,o.previousValue)}}if("object"==typeof e.propsListenerAsync)for(let n=0;n<t.length;n++){const o=t[n],a=e.propsListenerAsync[o.currentPath];if("update"===o.type&&a){const t=e[a]||a;"function"==typeof t&&function(n){delay((()=>t.call(e,n.newValue,n.previousValue)))}(o)}}}const types={string:e=>"string"==typeof e?e:JSON.stringify(e),number:e=>"number"==typeof e?e:Number(e),boolean:e=>"boolean"==typeof e?e:"true"===e||1===e||"false"!==e&&0!==e&&!!e,object(e){if("object"==typeof e&&e)return e;try{return JSON.parse(e)}catch(t){return e}},array(e){return this.object(e)},date:e=>e instanceof Date?e:new Date(e)};var castType=function(e,t){return void 0!==types[t]&&(e=types[t](e)),e};function manipulate(e,t,n,o,a){if("object"==typeof e.propsType){const o=e.propsType[n];void 0!==o&&(t=castType(t,o))}if(a&&(o=e.propsConvertOnFly),e.propsConvert&&e.propsConvertOnFly===o&&"object"==typeof e.propsConvert){const o=e.propsConvert[n],a=e[o]||o;if("function"==typeof a)return a.call(e,t)}if(a&&(o=e.propsComputedOnFly),e.propsComputed&&e.propsComputedOnFly===o&&"object"==typeof e.propsComputed){let o=e._computedCache.get(n);if(void 0===o)o=new Map,e._computedCache.set(n,o);else{const e=o.get(t);if(void 0!==e)return e}const a=e.propsComputed[n],r=e[a]||a;if("function"==typeof r){const n=r.call(e,t);return o.set(t,n),n}}return t}function runUpdate(e,t){hooks$1.callUpdate(e,t),propsListener(e,t),e.render(void 0,t)}function create$1(e){let t=!1;e._props&&e._props.__isProxy&&(ObservableSlim.remove(e._props),t=!0),e._props=ObservableSlim.create(e._rawProps,!0,(t=>{e._isRendered&&(e.delayUpdate?setTimeout((()=>{runUpdate(e,t)}),e.delayUpdate):runUpdate(e,t))}),((t,n)=>{t[n]=manipulate(e,t[n],n)})),ObservableSlim.manipulate(e._props,((t,n,o)=>manipulate(e,t,n,o))),ObservableSlim.beforeChange(e._props,(t=>{if(!1===hooks$1.callBeforeUpdate(e,t))return!1})),t&&e._isRendered&&e.render()}var observer={create:create$1};function getByPath(e,t){return e.split(".").reduce(((e,t)=>e?e[t]:void 0),t)}var isListener=function(e){return"string"==typeof e&&("o"===e[0]&&"n"===e[1])},makeSureAttach=function(e){e&&!e._dozAttach&&(e._dozAttach={})},booleanAttributes=["async","autocomplete","autofocus","autoplay","border","challenge","checked","compact","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","indeterminate","ismap","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","readonly","required","reversed","scoped","scrolling","seamless","selected","sortable","spellcheck","translate"];function isEventAttribute(e){return isListener(e)}function setAttribute(e,t,n,o,a,r){if("data-attributeoriginaletagname"===t)return;if(makeSureAttach(e),e._dozAttach[PROPS_ATTRIBUTES]||(e._dozAttach[PROPS_ATTRIBUTES]={}),e._dozAttach[PROPS_ATTRIBUTES][t]=n,"key"===t)return void(void 0===e._dozAttach.key&&(e._dozAttach.key=n));let p=isDirective(t);p&&(e._dozAttach.hasDirective=!0),(-1===e.tagName.indexOf("-")||o.exposeAttributes.includes(t)&&t.startsWith("data-"))&&(!isCustomAttribute(t)&&"function"!=typeof n&&"object"!=typeof n||p)&&(void 0===n&&(n=""),"class"!==t||r?void 0===e[t]||r?(t.startsWith("data-")||t.startsWith("aria-")||"role"===t||"for"===t||r||o&&o.app&&o.app.setAllAttributes)&&e.setAttribute(t,n):(""===n&&booleanAttributes.indexOf(t)>-1&&(n=!0),e[t]=n):e.className=n)}function updateAttribute(e,t,n,o,a,r,p){setAttribute(e,t,n,a,r,p),a.$$afterAttributeUpdate(e,t,n)}function updateAttributes(e,t,n={},o,a,r){const p=Object.assign({},t,n);let l,i=[],c=Object.keys(p);for(let p=0;p<c.length;p++)if(l=c[p],e&&1===e.nodeType&&t[l]!==n[l]){updateAttribute(e,l,t[l],n[l],o,a,r);let p={};p[l]=t[l],i.push(p)}return i}function isCustomAttribute(e){return isEventAttribute(e)||e===ATTR.FORCE_UPDATE}function extractEventName(e){return e.slice(2).toLowerCase()}function trimQuotes(e){return e.replace(REGEX.TRIM_QUOTES,"$1")}function addEventListener($target,name,value,cmp,cmpParent){if(!isEventAttribute(name))return;let alreadyFunction=!1;if("function"==typeof value&&(alreadyFunction=!0),"string"==typeof value){let e=value.match(REGEX.GET_LISTENER_SCOPE);if(e){let t=null,n=e[1],o=e[2];o&&(t=o.split(",").map((e=>"scope"===(e=trimQuotes(e.trim()))?cmpParent:e)));const a=getByPath(n,cmpParent);void 0!==a&&(value=t?a.bind(cmpParent,...t):a.bind(cmpParent))}else if(e=value.match(REGEX.GET_LISTENER),e){let t=null,n=e[1],o=e[2];o&&(t=o.split(",").map((e=>"this"===(e=trimQuotes(e.trim()))?cmp:e)));let a=n.match(REGEX.IS_PARENT_METHOD);a&&(n=a[1],cmp=cmp.parent);const r=getByPath(n,cmp);void 0!==r&&(value=t?r.bind(cmp,...t):r.bind(cmp))}}if("function"==typeof value)alreadyFunction?$target.addEventListener(extractEventName(name),value.bind(cmp)):$target.addEventListener(extractEventName(name),value);else if(value=value.replace(REGEX.THIS_TARGET,"$target"),value.match(REGEX.IS_LISTENER_SCOPE)||"scope"===value){const _func=function(){value=value.replace(/scope/g,"this"),eval(value)};$target.addEventListener(extractEventName(name),_func.bind(cmpParent))}else{const _func=function(){eval(value)};$target.addEventListener(extractEventName(name),_func.bind(cmp))}}function attach(e,t,n,o,a){let r;const p=Object.keys(t);for(let l=0,i=p.length;l<i;l++)r=p[l],addEventListener(e,r,t[r],n,o),setAttribute(e,r,t[r],n,o,a),n&&n.app&&n.app.emit&&n.app.emit("elementAttributesAttach",e,r,t[r],n)}function canDecode(e){return/&\w+;/.test(e)?html.decode(e):e}function composeStyleInner(e,t,n){if("string"!=typeof e)return;let o=t.replace(/[^\w]/g,"");return/:root/.test(e)&&console.warn("[DEPRECATION] the :root pseudo selector is deprecated, use :component or :wrapper instead"),e=(e=e.replace(/{/g,"{\n").replace(/}/g,"}\n").replace(/^(\s+)?:(component|wrapper|root)(\s+)?{/gm,t+" {").replace(/:(component|wrapper|root)/g,"").replace(/(@(?:[\w-]+-)?keyframes\s+)([\w-_]+)/g,`$1 ${o}-$2`).replace(/((?:[\w-]+-)?animation(?:-name)?(?:\s+)?:(?:\s+))([\w-_]+)/g,`$1 ${o}-$2`).replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/[^\s].*{/gm,(e=>{if(/^(@|:host|(from|to|\d+%)[^-_])/.test(e))return e;let n=e.split(",");const o=new RegExp(`^${t.replace(/[[\]]/g,"\\$&")}(\\s+)?{`);for(let e=0;e<n.length;e++)n[e]=n[e].trim(),o.test(n[e])||(/^:global/.test(n[e])?n[e]=n[e].replace(":global",""):n[e]=`${t} ${n[e]}`);return e=n.join(",")}))).replace(/\s{2,}/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\s:/g,":").replace(/\n/g,"").trim()}var tagList=["a","abbr","address","area","article","aside","audio","b","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","main","map","mark","menu","meter","nav","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"];function createStyle(e,t,n,o,a){let r;const p=`${t}--style`,l=`${t}--style-reset`;let i;if(i=a&&a.app.useShadowRoot?a.app._root.getElementById(p):document.getElementById(p),i)r=i.innerHTML=e;else{if(o){let e=`${n}, ${n} *,`;e+=tagList.map((e=>`${n} ${e}`)).join(","),e+=" {all: initial}";const t=document.createElement("style");if(t.id=l,t.innerHTML=e,a&&a.app.useShadowRoot){let e=a.app._root.querySelector(TAG.APP);a.app._root.insertBefore(t,e)}else document.head.appendChild(t)}const t=document.createElement("style");if(t.id=p,r=t.innerHTML=e,a&&a.app.useShadowRoot){let e=a.app._root.querySelector(TAG.APP);a.app._root.insertBefore(t,e)}else document.head.appendChild(t)}return r}function scopedInner(e,t,n,o,a){if("string"==typeof e)return createStyle(e=composeStyleInner(e,n),t,n,o,a)}const storeElementNode=Object.create(null),deadChildren=[];function isChanged(e,t){return typeof e!=typeof t||"string"==typeof e&&e!==t||e.type!==t.type||e.props&&e.props.forceupdate}function create(e,t,n,o){if(void 0===e||Array.isArray(e)&&0===e.length)return;let a,r;if("object"!=typeof e)return document.createTextNode(canDecode(e));if(e&&null!=e.type&&"#"!==e.type[0]||(e={type:TAG.EMPTY,props:{},children:[]}),e.props&&e.props.slot&&!e.isNewSlotEl)return document.createComment(`slot(${e.props.slot})`);if(a=storeElementNode[e.type],a?r=a.cloneNode():(r=e.isSVG?document.createElementNS(NS.SVG,e.type):document.createElement(e.type),storeElementNode[e.type]=r.cloneNode(!0)),attach(r,e.props,t,o,e.isSVG),!e.hasKeys)if(e.children.length)if(1===e.children.length&&"string"==typeof e.children[0])r.textContent=canDecode(e.children[0]);else for(let a=0;a<e.children.length;a++){let p=create(e.children[a],t,n,o);p&&r.appendChild(p)}else;return makeSureAttach(r),r._dozAttach.elementChildren=e.children,r._dozAttach.originalTagName=e.props["data-attributeoriginaletagname"],t.$$afterNodeElementCreate(r,e,n),e.style&&setHeadStyle(e,t),r}function setHeadStyle(e,t){t.__hasStyle=!0;let n=e.styleScoped;const o=t.uId;let a=`[data-uid="${o}"]`;scopedInner(e.style,o,a,n,t)}function update(e,t,n,o=0,a,r,p){if(e&&(t!==n||a.tag===TAG.MOUNT)){if(a&&a.app&&a.app.onVdomUpdateElement){let o=a.app.onVdomUpdateElement(e,t,n,a,r,p);o&&(e=o.$parent||e,t=o.newNode||t,n=o.oldNode||n,a=o.cmp||a)}if(t&&t.cmp&&(a=t.cmp),t&&n&&t.style!==n.style&&setHeadStyle(t,a),p&&e._dozAttach[COMPONENT_INSTANCE]){let o=hooks$1.callDrawByParent(e._dozAttach[COMPONENT_INSTANCE],t,n);null!=o&&"object"==typeof o&&(t=o.newNode||t,n=o.oldNode||n);let l=!(!t||!t.props)&&t.props.slot;if(e._dozAttach[COMPONENT_INSTANCE]._defaultSlot&&!l&&(l=DEFAULT_SLOT_KEY),"object"==typeof t&&l&&e._dozAttach[COMPONENT_INSTANCE]._slots[l])return void e._dozAttach[COMPONENT_INSTANCE]._slots[l].forEach((o=>{if(o.parentNode){t.isNewSlotEl=!0;let n=create(t,a,r,e._dozAttach[COMPONENT_INSTANCE]||p);n.removeAttribute("slot"),o.parentNode.replaceChild(n,o),o.__newSlotEl=n}else{let l=Array.from(o.__newSlotEl.parentNode.children).indexOf(o.__newSlotEl);update(o.__newSlotEl.parentNode,t,n,l,a,r,e._dozAttach[COMPONENT_INSTANCE]||p)}}))}if(t&&t.props&&t.props["data-follow"]){let n=document.querySelector(`[data-follow="${t.props["data-follow"]}"]`);n&&n.parentElement&&(e=n.parentElement,makeSureAttach(e))}if(!n){let n;if(e.childNodes.length){let o=e.childNodes[e.childNodes.length-1];if(makeSureAttach(o),o._dozAttach[COMPONENT_ROOT_INSTANCE])return n=create(t,a,r,e._dozAttach[COMPONENT_INSTANCE]||p),e.insertBefore(n,o),n}return makeSureAttach(e),n=create(t,a,r,e._dozAttach[COMPONENT_INSTANCE]||p),e.appendChild(n),n}if(t){if(isChanged(t,n)){const l=e.childNodes[o];if(!l)return;const i=a.$$beforeNodeChange(e,l,t,n);if(i)return i;const c=create(t,a,r,e._dozAttach[COMPONENT_INSTANCE]||p);return e.replaceChild(c,l),a.$$afterNodeChange(c,l),l._dozAttach&&l._dozAttach[COMPONENT_INSTANCE]&&(l._dozAttach[COMPONENT_INSTANCE].unmount(),l._dozAttach[COMPONENT_INSTANCE].destroy()),c}if(void 0!==t.hasKeys||void 0!==n.hasKeys){let l=e.childNodes[o],i=t.children.map((e=>e.key)),c=n.children.map((e=>e.key));void 0===l._dozAttach.keyList&&(l._dozAttach.keyList=new Map);let s=c.filter((e=>!i.includes(e)));for(let e=0;e<s.length;e++)if(l._dozAttach.keyList.has(s[e])){let t=l._dozAttach.keyList.get(s[e]);t._dozAttach[COMPONENT_INSTANCE]?t._dozAttach[COMPONENT_INSTANCE].destroy():l.removeChild(t),l._dozAttach.keyList.delete(s[e]),a.app.cacheStores.kCache.delete(s[e])}s.length&&(c=c.filter((e=>!~s.indexOf(e))));let d=[],u=[],m=Object.create(null);for(let n=0;n<i.length;n++){i[n]!==c[n]&&(u.push(n),m[n]=!0);let o=i[n],s=l._dozAttach.keyList.get(o);if(s){let t=a.app.cacheStores.kCache.get(o),n=t.next,l=t.prev;n.children||(n.children=[]),l.children||(l.children=[]),d.push(s),t.isChanged&&updateAttributes(s,n.props,l.props,a,e._dozAttach[COMPONENT_INSTANCE]||p,n.isSVG);const i=n.children.length,c=l.children.length;for(let t=0;t<i||t<c;t++)void 0!==n.children[t]&&void 0!==l.children[t]&&update(s,n.children[t],l.children[t],t,a,r,e._dozAttach[COMPONENT_INSTANCE]||p)}else{let i=create(t.children[n],a,r,e._dozAttach[COMPONENT_INSTANCE]||p);l._dozAttach.keyList.set(o,i),d.push(i)}}if(void 0===u[0])return;if(l.childNodes.length===u[0]){for(let e=0;e<d.length;e++)l.appendChild(d[e]);return}let h,f,y=!0,C=0,_=d.length-1;for(;C<=_;)y?(h=l.childNodes[C],f=d[C],m[C]&&Array.prototype.indexOf.call(l.childNodes,f)!==C&&(l.insertBefore(f,h),y=!1),C++):(h=l.childNodes[_],f=d[_],m[_]&&Array.prototype.indexOf.call(l.childNodes,f)!==_&&(h?l.insertBefore(f,h.nextSibling):(l.appendChild(f),_++),y=!0),_--)}else if(t.type){if(e._dozAttach[COMPONENT_INSTANCE]===a&&e.childNodes.length){let t=e.childNodes.length-1;e.childNodes[t]._dozAttach&&e.childNodes[t]._dozAttach[COMPONENT_ROOT_INSTANCE]&&(o+=t)}let l=updateAttributes(e.childNodes[o],t.props,n.props,a,e._dozAttach[COMPONENT_INSTANCE]||p,t.isSVG);if(a.$$beforeNodeWalk(e,o,l))return;const i=t.children.length,c=n.children.length;for(let l=0;l<i||l<c;l++)update(e.childNodes[o],t.children[l],n.children[l],l,a,r,e._dozAttach[COMPONENT_INSTANCE]||p);clearDead()}}else e.childNodes[o]&&deadChildren.push(e.childNodes[o])}}function clearDead(){let e=deadChildren.length;for(;e--;)deadChildren[e].parentNode.removeChild(deadChildren[e]),deadChildren[e]._dozAttach&&deadChildren[e]._dozAttach[COMPONENT_INSTANCE]&&(deadChildren[e]._dozAttach[COMPONENT_INSTANCE].unmount(),deadChildren[e]._dozAttach[COMPONENT_INSTANCE].destroy()),deadChildren.splice(e,1)}var element={create:create,update:update};const updateElement=element.update;function camelToDash(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}function toInlineStyle(e,t=!0){return e=Object.entries(e).reduce(((e,[t,n])=>`${e}${camelToDash(t)}:${n};`),""),t?`style="${e}"`:e}function add$1(e){let t=e.__proto__;"function"==typeof e.onAppReady?(e.onAppReady._instance=e,e.app._onAppReadyCB.push(e.onAppReady)):t&&t.constructor&&t.constructor.__postListeners&&t.constructor.__postListeners.onAppReady&&(t.constructor.__postListeners.onAppReady._instance=e,e.app._onAppReadyCB.push(t.constructor.__postListeners.onAppReady))}var queueReady={add:add$1};function add(e){"function"==typeof e.onAppDraw&&(e.onAppDraw._instance=e,e.app._onAppDrawCB.push(e.onAppDraw))}function emit(e,t,n){e.app._onAppDrawCB.forEach((o=>{"function"==typeof o&&o._instance&&o.call(o._instance,t,n,e)}))}var queueDraw={add:add,emit:emit};function extendInstance(e,t,n){Object.assign(e,t,n)}function deepCopy(e){if("object"!=typeof e||null===e)return e;let t,n;if(Array.isArray(e)){let o;for(t=[],n=0,o=e.length;n<o;n++)t[n]=deepCopy(e[n]);return t}for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=deepCopy(e[n]));return t}const tagText=TAG.TEXT_NODE_PLACE,LESSER="<",GREATER=">",PLACEHOLDER_REGEX_GLOBAL=/e-0_(\d+)_0-e/g,PLACEHOLDER_REGEX=/e-0_(\d+)_0-e/;function placeholderIndex(e,t){if("string"!=typeof e)return e;if("e"===e[0]&&"-"===e[1]){let n=PLACEHOLDER_REGEX.exec(e);return n?"0"===n[1][0]&&n[1].length>=2?t[n[1].substr(1)]+"":t[n[1]]:e}return e.replace(PLACEHOLDER_REGEX_GLOBAL,((e,n)=>n?t[n]:e))}function generateItemKey(e){let t="";for(let n=0;n<e.length;n++)"function"!=typeof e[n]&&"object"!=typeof e[n]&&(t+=e[n]);return t}function fillCompiled(e,t,n,o){let a=Object.keys(e);for(let r=0;r<a.length;r++)if(e[a[r]]&&"object"==typeof e[a[r]])fillCompiled(e[a[r]],t,e,o);else{let p=placeholderIndex(e[a[r]],t);if("type"===a[r]&&"string"!=typeof p){let t=p||{},n=camelToDash(t.tag||t.name||TAG.ROOT);n=n.replace(/_+/,""),-1===n.indexOf("-")&&(n=`${n}-${n}`);let a=n+"-"+o.uId+"-"+o._localComponentLastId++;o._componentsMap.has(p)?a=o._componentsMap.get(p):o._componentsMap.set(p,a),void 0===o._components[a]&&(o._components[a]={tag:n,cfg:t}),void 0===o.app._components[a]&&(o.app._components[a]={tag:n,cfg:t}),p=n,e.props["data-attributeoriginaletagname"]=a}Array.isArray(p)&&"0"===a[r]?(n.children=p,p[0]&&void 0!==p[0].key&&(n.hasKeys=!0)):(""===p&&"0"===a[r]&&(p=" "),e[a[r]]=p)}}var h=function(e,...t){let n,o,a;this&&this.app?(n=this.app.cacheStores.hCache,o=this.app.cacheStores.kCache,a=this.app.isWebComponent&&this._mainComponentByAppCreate):(n=cacheStores.hCache,o=cacheStores.kCache);let r,p=n.get(e);if(!p){p=e[0];let o=!1,r=!1,l=!1,i=t.length;for(let n=0;n<i;++n){let i=e[n],c=i.length,s=i[c-1];for(let e=0;e<c;e++)i[e]===LESSER?o=!1:i[e]===GREATER&&(o=!0);i.indexOf("<style")>-1&&(r=!0,l=!0),i.indexOf("</style")>-1&&(r=!1),l&&a&&(p=p.replace(/<style>/,"<style data-is-webcomponent>")),r&&(o=!1,p=p.replace(/ scoped>/," data-scoped>")),o?"object"==typeof t[n]||"function"==typeof t[n]?p+=`e-0_${n}_0-e${e[n+1]}`:(""===t[n]&&(t[n]=" "),/<.*>/.test(t[n])?p+=`${t[n]}${e[n+1]}`:p+=`<${tagText}>e-0_0${n}_0-e</${tagText}>${e[n+1]}`):p+="/"===s?e[n+1]:`e-0_${n}_0-e${e[n+1]}`}p=p.trim(),n.set(e,p)}let l,i=compile(p);if(i.props.forceupdate&&n.delete(e),void 0===i.key&&void 0===i.props["item-list"]||(l=generateItemKey(t),r=l?n.get(l):void 0),r||(r=deepCopy(i),fillCompiled(r,t,null,this),l&&n.set(l,r)),void 0!==i.key){let e=o.get(r.key);e?o.set(r.key,{isChanged:l!==e.clonedKey,clonedKey:l,next:r,prev:e.next}):o.set(r.key,{isChanged:!0,clonedKey:l,next:r,prev:{}})}return r};function loadLocal(e){Array.isArray(e.components)?(e.components.forEach((t=>{"object"==typeof t&&"string"==typeof t.tag&&"object"==typeof t.cfg&&(e._components[t.tag]=t)})),delete e.components):"object"==typeof e.components&&(Object.keys(e.components).forEach((t=>{e._components[t]={tag:t,cfg:e.components[t]}})),delete e.components)}function mixin(e,t=[]){if("object"!=typeof e||null==e)throw new TypeError("expected an object");Array.isArray(t)||(t=[t]);for(let n=t.length-1;n>=0;--n){let o=Object.keys(t[n]);for(let a=o.length-1;a>=0;--a){let r=o[a];void 0===e[r]?e[r]=t[n][r]:console.warn("Doz",`mixin failed for already defined property: ${r}`)}}return e}function localMixin(e){mixin(e,e.mixin),e.mixin=[]}function propsInit(e){!function t(n){let o=Object.keys(n);for(let a=0,r=o.length;a<r;a++){let r=o[a];n[r]instanceof Object&&null!==n[r]?t(n[r]):n[r]=manipulate(e,n[r],r,!1,!0)}}(e._rawProps)}class Base{constructor(e={}){e.cmp=e.cmp||{tag:e.tag,cfg:{}},e.app=e.app||{},Object.defineProperties(this,{_opt:{value:e},_cfgRoot:{value:e.root},_publicProps:{value:Object.assign({},e.props)},_isRendered:{value:!1,writable:!0},_prev:{value:null,writable:!0},_rootElement:{value:null,writable:!0},_parentElement:{value:null,writable:!0},_components:{value:{},writable:!0},_processing:{value:[],writable:!0},_dynamicChildren:{value:[],writable:!0},_unmounted:{value:!1,writable:!0},_unmountedParentNode:{value:null,writable:!0},_configured:{value:!1,writable:!0},_props:{value:{},writable:!0},_directiveProps:{value:{},writable:!0},_computedCache:{value:new Map},_renderPause:{value:!1,writable:!0},_rawHTML:{value:"",writable:!0},_hasSlots:{value:!1,writable:!0},_slots:{value:{},writable:!0},_defaultSlot:{value:null,writable:!0},_localComponentLastId:{value:0,writable:!0},_currentStyle:{value:"",writable:!0},_componentsMap:{value:new Map},tag:{value:e.cmp.tag,enumerable:!0,writable:!0},app:{value:e.app,enumerable:!0},exposeAttributes:{value:["style","class"],enumerable:!0,writable:!0},parent:{value:e.parentCmp,enumerable:!0,configurable:!0},appRoot:{value:e.app._root,enumerable:!0},action:{value:e.app.action,enumerable:!0},shared:{value:e.app.shared,writable:!0,enumerable:!0},children:{value:{},enumerable:!0},childrenByTag:{value:{},enumerable:!0},rawChildren:{value:[],enumerable:!0},rawChildrenVnode:{value:[],enumerable:!0},autoCreateChildren:{value:!0,enumerable:!0,writable:!0},updateChildrenProps:{value:!0,enumerable:!0,writable:!0},mixin:{value:[],enumerable:!0,writable:!0},propsConvertOnFly:{value:!1,enumerable:!0,writable:!0},propsComputedOnFly:{value:!1,enumerable:!0,writable:!0},delayUpdate:{value:0,enumerable:!0,writable:!0},propsData:{value:{},enumerable:!0,writable:!0},lockRemoveInstanceByCallback:{value:null,enumerable:!0,writable:!0},waitMount:{value:!1,enumerable:!0,writable:!0}})}}function doCreateInstance(e,t){let n=createInstance({root:null,template:t,app:e.app,parent:e});if(n){n._rootElement.parentNode._dozAttach[COMPONENT_DYNAMIC_INSTANCE]=n;let o=Object.keys(e.children).length;e.children[o++]=n,void 0===e.childrenByTag[n.tag]?e.childrenByTag[n.tag]=[n]:e.childrenByTag[n.tag].push(n),directives.callAppDynamicInstanceCreate(e,n,{node:t,action:"create"})}}class DOMManipulation extends Base{constructor(e){super(e)}$$afterNodeElementCreate(e,t,n){if(e._dozAttach.hasDirective&&(directives.callAppDOMElementCreate(this,e,t,n),directives.callComponentDOMElementCreate(this,e,n)),"function"==typeof e.hasAttribute&&(-1===t.type.indexOf("-")||n||doCreateInstance(this,e),e.nodeName===TAG.SLOT_UPPERCASE)){let t=e._dozAttach[PROPS_ATTRIBUTES]?e._dozAttach[PROPS_ATTRIBUTES].name:null;t||(this._defaultSlot=e,t=DEFAULT_SLOT_KEY),void 0===this._slots[t]?this._slots[t]=[e]:this._slots[t].push(e),this._hasSlots=!0}}$$beforeNodeChange(e,t,n,o){if("string"==typeof n&&"string"==typeof o&&t)return"SCRIPT"===e.nodeName?"text/style"===e.type&&e._dozAttach.styleData.id&&e._dozAttach.styleData.owner&&document.getElementById(e._dozAttach.styleData.id)&&(document.getElementById(e._dozAttach.styleData.id).textContent=composeStyleInner(n,e._dozAttach.styleData.ownerByData)):t.textContent=canDecode(n),t}$$afterNodeChange(e,t){makeSureAttach(t),makeSureAttach(e),t._dozAttach[COMPONENT_ROOT_INSTANCE]&&(e._dozAttach[COMPONENT_ROOT_INSTANCE]=t._dozAttach[COMPONENT_ROOT_INSTANCE],e._dozAttach[COMPONENT_ROOT_INSTANCE]._rootElement=e,e._dozAttach[COMPONENT_ROOT_INSTANCE]._rootElement.parentNode.dataset.uid=t._dozAttach[COMPONENT_ROOT_INSTANCE].uId)}$$beforeNodeWalk(e,t,n){if(e.childNodes[t]){makeSureAttach(e.childNodes[t]);const o=e.childNodes[t]._dozAttach[COMPONENT_DYNAMIC_INSTANCE];if(o&&n.length)return n.forEach((e=>{Object.keys(e).forEach((t=>{o.props[t]=e[t]}))})),!0}return!1}$$afterAttributeUpdate(e,t,n){let o=isDirective(t);if(this.updateChildrenProps&&e){t=o?t:dashToCamel(t);const a=e.firstChild;makeSureAttach(a),a&&a._dozAttach[COMPONENT_ROOT_INSTANCE]&&Object.prototype.hasOwnProperty.call(a._dozAttach[COMPONENT_ROOT_INSTANCE]._publicProps,t)?a._dozAttach[COMPONENT_ROOT_INSTANCE].props[t]=n:e._dozAttach[COMPONENT_INSTANCE]&&(e._dozAttach[COMPONENT_INSTANCE].props[t]=n)}directives.callComponentDOMElementUpdate(this,e),e&&o&&e.removeAttribute(t)}}function cloneObject(e){return JSON.parse(JSON.stringify(e))}function toLiteralString(e){return e.replace(/{{/gm,"${").replace(/}}/gm,"}")}class Component extends DOMManipulation{constructor(e){super(e),Object.defineProperty(this,"_isSubclass",{value:this.__proto__.constructor!==Component}),Object.defineProperty(this,"uId",{value:this.app.generateUId(),enumerable:!0}),Object.defineProperty(this,"h",{value:h.bind(this),enumerable:!1}),this._initRawProps(e),extendInstance(this,e.cmp.cfg),localMixin(this),loadLocal(this);!1!==hooks$1.callBeforeCreate(this)?(observer.create(this,!0),queueReady.add(this),queueDraw.add(this),hooks$1.callCreate(this)):this.__beforeCreateReturnsFalse=!0}set props(e){"function"==typeof e&&(e=e()),this._rawProps=Object.assign({},e,this._opt?this._opt.props:{}),observer.create(this),directives.callAppComponentSetProps(this),this.app.emit("componentSetProps",this)}get props(){return this._props}loadProps(e){if("object"!=typeof e)throw new TypeError("Props must be an object");this._rawProps=Object.assign({},e),propsInit(this),observer.create(this),hooks$1.callLoadProps(this)}set config(e){if(!this._isSubclass)throw new Error("Config is allowed only for classes");if(this._configured)throw new Error("Already configured");if("object"!=typeof e)throw new TypeError("Config must be an object");directives.callAppComponentSetConfig(this,e),"object"==typeof e.mixin&&(this.mixin=e.mixin,localMixin(this)),"object"==typeof e.components&&(this.components=e.components,loadLocal(this)),"boolean"==typeof e.autoCreateChildren&&(this.autoCreateChildren=e.autoCreateChildren),"boolean"==typeof e.updateChildrenProps&&(this.updateChildrenProps=e.updateChildrenProps),this._configured=!0,hooks$1.callConfigCreate(this)}getHTMLElement(){return this._parentElement}beginSafeRender(){ObservableSlim.beginRender(this.props)}endSafeRender(){ObservableSlim.endRender(this.props)}each(e,t,n=!1){let o;return Array.isArray(e)&&(n&&this.beginSafeRender(),o=e.map(t),n&&this.endSafeRender()),o}toStyle(e,t=!0){return toInlineStyle(e,t)}render(e,t=[],n=!1){if(this._renderPause)return;this.beginSafeRender();const o=Object.keys(this.props),a=[this.h];for(let e=0;e<o.length;e++)a.push(this.props[o[e]]);const r=this.template.apply(this,a);this.endSafeRender();let p=r&&"object"==typeof r?r:compile(r);this.app.emit("draw",p,this._prev,this),queueDraw.emit(this,p,this._prev);const l=updateElement(this._cfgRoot,p,this._prev,0,this,e);!this._rootElement&&l&&(this._rootElement=l,makeSureAttach(this._rootElement),this._parentElement=l.parentNode,this.__hasStyle&&(this._parentElement.dataset?this._parentElement.dataset.uid=this.uId:this._parentElement.firstElementChild.nextElementSibling.dataset.uid=this.uId)),this._prev=p,n||hooks$1.callAfterRender(this)}renderPause(){this._renderPause=!0}renderResume(e=!0){this._renderPause=!1,e&&this.render()}prepareCommit(){ObservableSlim.pause(this.props),this.renderPause()}commit(){this.renderResume(),ObservableSlim.resume(this.props)}get isRenderPause(){return this._renderPause}mount(e,t={}){if(this._unmounted)return!1===hooks$1.callBeforeMount(this)||(this._unmountedPlaceholder.parentNode.replaceChild(this._unmountedParentNode,this._unmountedPlaceholder),this._unmounted=!1,this._unmountedParentNode=null,this._unmountedPlaceholder=null,hooks$1.callMount(this),Object.keys(this.children).forEach((e=>{this.children[e].mount()}))),this;if(e){let n=this._rootElement;return"string"==typeof t.selector?n=n.querySelector(t.selector):t.selector instanceof HTMLElement?n=t.selector:1!==this._rootElement.nodeType&&(n=this.getHTMLElement()),this._unmounted=!1,this._unmountedParentNode=null,this._unmountedPlaceholder=null,this.app.mount(e,n,this)}}unmount(e=!1,t,n){if(this.lockRemoveInstanceByCallback&&"function"==typeof this.lockRemoveInstanceByCallback)this.lockRemoveInstanceByCallback(this.unmount,e,t,n);else if(e||!Boolean(this._unmountedParentNode)&&this._rootElement&&this._rootElement.parentNode&&this._rootElement.parentNode.parentNode)return!1!==hooks$1.callBeforeUnmount(this)&&(this._unmountedParentNode=this._rootElement.parentNode,this._unmountedPlaceholder=document.createComment(Date.now().toString()),e?this._rootElement.parentNode&&this._rootElement.parentNode.parentNode.removeChild(this._rootElement.parentNode):this._rootElement.parentNode.parentNode.replaceChild(this._unmountedPlaceholder,this._unmountedParentNode),this._unmounted=!t,n||hooks$1.callUnmount(this),Object.keys(this.children).forEach((o=>{this.children[o].unmount(e,t,n)})),this)}destroy(e){if(this.lockRemoveInstanceByCallback&&"function"==typeof this.lockRemoveInstanceByCallback)this.lockRemoveInstanceByCallback(this.destroy,e);else if(!1!==this.unmount(e,!0)&&(e||this._rootElement&&!1!==hooks$1.callBeforeDestroy(this))){if(Object.keys(this.children).forEach((e=>{this.children[e].destroy()})),hooks$1.callDestroy(this),this.parent&&this.parent.children){for(let e in this.parent.children)this.parent.children.hasOwnProperty(e)&&this===this.parent.children[e]&&delete this.parent.children[e];if(this.parent.childrenByTag[this.tag]){let e=this.parent.childrenByTag[this.tag].indexOf(this);-1!==e&&this.parent.childrenByTag[this.tag].splice(e,1)}}return!0}}template(){return""}_initTemplate(opt){if("string"==typeof opt.cmp.cfg.template&&opt.app.cfg.enableExternalTemplate){let contentTpl=opt.cmp.cfg.template;REGEX.IS_ID_SELECTOR.test(contentTpl)?opt.cmp.cfg.template=function(){let contentStr=toLiteralString(document.querySelector(contentTpl).innerHTML);return eval("`"+contentStr+"`")}:opt.cmp.cfg.template=function(){return contentTpl=toLiteralString(contentTpl),eval("`"+contentTpl+"`")}}}_initRawProps(e){this._isSubclass?this._rawProps=Object.assign({},e.props):(this._rawProps=Object.assign({},"function"==typeof e.cmp.cfg.props?e.cmp.cfg.props():e.cmp.cfg.props,e.props),this._initTemplate(e)),Object.defineProperty(this,"_initialProps",{value:cloneObject(this._rawProps)})}getDozWebComponentById(e){return this.getWebComponentById(e)}getDozWebComponentByTag(e){return this.getWebComponentByTag(e)}getWebComponentById(e){return data.webComponents.ids[e]||null}getWebComponentByTag(e){return data.webComponents.tags[e]||null}_setProps(e){for(let t in e)e.hasOwnProperty(t)&&(this.props[t]=e[t])}setProps(e){this.prepareCommit(),this._setProps(e),this.commit()}setPropsAsync(e){delay((()=>this._setProps(e)))}}function getComponentName(e){return e._dozAttach.originalTagName||e.nodeName.toLowerCase()}function createInstance(e={}){e.root&&(e.mountMainComponent||e.template instanceof HTMLElement||"string"==typeof e.template&&(e.template=html.create(e.template),e.root.appendChild(e.template)));let t,n=null;const o=[];function a(e,t){if(e.cmp){let n=Object.keys(e.cmp.children).length++;directives.callAppComponentAssignIndex(t,n,(n=>{e.cmp.children[n]=t})),void 0===e.cmp.childrenByTag[t.tag]?e.cmp.childrenByTag[t.tag]=[t]:e.cmp.childrenByTag[t.tag].push(t)}}function r(){o.forEach((e=>e.remove()))}function p(r,l={}){for(;r;){if(makeSureAttach(r),r._dozAttach[ALREADY_WALKED]){r=r.nextElementSibling;continue}r._dozAttach[ALREADY_WALKED]=!0,directives.callAppWalkDOM(l,r),t=getComponentName(r),directives.callAppComponentAssignName(l,r,(e=>{t=e}));let c={};l.cmp&&l.cmp._components&&(c=l.cmp._components);const s=e.autoCmp||c[t]||e.app._components[t]||collection.getComponent(t);let d;if(s){if(l.cmp){const y=r.outerHTML;l.cmp.rawChildren.push(y)}if(l.cmp&&l.cmp.mounted){r=r.nextElementSibling;continue}if(l.cmp&&!1===l.cmp.autoCreateChildren){o.push(r),r=r.nextElementSibling;continue}const u=serializeProps(r),m={},h=l.cmp||e.parent;let f;if("function"==typeof s.cfg){if(!(s.cfg.prototype instanceof Component)){const C=s.cfg;s.cfg=class extends Component{},s.cfg.prototype.template=C}f=new s.cfg({tag:s.tag||t,root:r,app:e.app,props:u,componentDirectives:m,parentCmp:h})}else if(s.cfg.then){let _=null,A=null;r.parentElement&&r.parentElement._dozAttach&&r.parentElement._dozAttach.props&&(r.parentElement._dozAttach.props["d-async-loading"]&&(_=r.parentElement._dozAttach.props["d-async-loading"]),r.parentElement._dozAttach.props["d-async-error"]&&(A=r.parentElement._dozAttach.props["d-async-error"])),((n,o,r)=>{let c=null;if(o){let t={},a={};"object"==typeof o&&o.component&&(t=o.props||t,a=o.directives||a,o=o.component),f=new o({tag:o.tag||"loading-component",root:n,app:e.app,props:t,componentDirectives:a,parentCmp:h}),c=f}s.cfg.then((o=>{if("object"==typeof o){let e=Object.keys(o);o=o[e[e.length-1]]}if(o.tag){let e=document.createElement(o.tag);n.replaceWith(e),n=e}f=new o({tag:s.tag||t,root:n,app:e.app,props:u,componentDirectives:m,parentCmp:h}),propsInit(f),f.app.emit("componentPropsInit",f),c&&c.destroy(),i(f),p(f.getHTMLElement(),{cmp:f}),a(l,f)})).catch((t=>{if(r){let t={},o={};"object"==typeof r&&r.component&&(t=r.props||t,o=r.directives||o,r=r.component),f=new r({tag:r.tag||"error-component",root:n,app:e.app,props:t,componentDirectives:o,parentCmp:h})}console.error(t)}))})(r,_,A)}else f=new Component({tag:s.tag||t,cmp:s,root:r,app:e.app,props:u,componentDirectives:m,parentCmp:h});if(f&&f.__beforeCreateReturnsFalse&&(f=void 0),!f){r=r.nextElementSibling;continue}function i(t=null){if(f=t||f,!f._isRendered){if(f._isRendered=!0,f.render(!0),n||(n=f),f._rootElement._dozAttach[COMPONENT_ROOT_INSTANCE]=f,f.getHTMLElement()._dozAttach[COMPONENT_INSTANCE]=f,f._defaultSlot&&f.getHTMLElement().firstElementChild){let e=document.createComment("slot");f.getHTMLElement().replaceChild(e,f.getHTMLElement().firstElementChild)}f._hasSlots&&h&&h.render(!1,[],!0),hooks$1.callMount(f),hooks$1.callMountAsync(f),f.waitMount&&(p(f.getHTMLElement().firstElementChild,{cmp:f}),f.appReadyExcluded||e.app._onAppComponentsMounted.delete(f))}}f.rawChildrenObject=r._dozAttach.elementChildren,f.$domEl=r,"object"==typeof f.module&&hmr(f,f.module),propsInit(f),f.app.emit("componentPropsInit",f),f.waitMount?(f.appReadyExcluded||e.app._onAppComponentsMounted.set(f,!1),f.runMount=i,hooks$1.callWaitMount(f)):!1!==hooks$1.callBeforeMount(f)?i():f.runMount=i,d=f,a(l,f),e.autoCmp=null}r.firstElementChild&&p(r.firstElementChild,{cmp:d||l.cmp}),r=r.nextElementSibling}}if(e.mountMainComponent){let t=new e.component({cmp:e.component,root:e.root,app:e.app,props:e.props||{},componentDirectives:{},parentCmp:null});if(propsInit(t),t.app.emit("componentPropsInit",t),t._isRendered=!0,t._mainComponentByAppCreate=!0,t.render(!0),e.innerHTML){html.create(e.innerHTML,"div").childNodes.forEach((e=>{t.getHTMLElement().appendChild(e)}))}return p(t.getHTMLElement(),{cmp:t}),r(),hooks$1.callMount(t),hooks$1.callMountAsync(t),t}return p(e.template),r(),n}var propsPropagation=function(e,t){function n(e,t){return e._propsPropagationIsArray&&-1===e.propsPropagation.indexOf(t)||"d"===(n=t)[0]&&(":"===n[1]||"-"===n[1]);var n}function o(e,t){let o=e._propsPropagationMainParent;t?t.forEach((t=>{n(o,t.currentPath)||(e.props[t.currentPath]=t.newValue)})):Object.keys(o.props).forEach((t=>{n(o,t)||(e.props[t]=o.props[t])}))}function a(e,t){e._propsPropagationChildren.forEach((e=>{o(e,t)}))}t.on("componentSetProps",(e=>{e.propsPropagation&&a(e)})),t.on("componentPropsInit",(e=>{var t;e.propsPropagation&&Object.defineProperties(e,{_propsPropagationIsArray:{value:Array.isArray(e.propsPropagation)},_propsPropagationIsMainParent:{value:!0},_propsPropagationMainParent:{value:e,writable:!0},_propsPropagationChildren:{value:[]}}),e.parent&&e.parent.propsPropagation&&(e.excludeFromPropsPropagation||void 0!==e.props["d:no-propagation"]?Object.defineProperty(e,"excludeFromPropsPropagation",{value:!0}):(e.propsPropagation=e.parent.propsPropagation,e._propsPropagationMainParent=e.parent._propsPropagationMainParent,(t=e)._propsPropagationMainParent._propsPropagationChildren.push(t),o(e)))})),t.on("componentUpdate",((e,t)=>{e._propsPropagationIsMainParent&&a(e,t)})),t.on("componentDestroy",(e=>{e._propsPropagationMainParent&&function(e){let t=e._propsPropagationMainParent._propsPropagationChildren;for(let n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)}(e)}))};const globalStoreObjectName="DOZ_STORES";var serverSideLoadProps=function(e,t){t.on("componentPropsInit",(e=>{let t=window[globalStoreObjectName];t&&e.store&&t[e.store]&&(e.props=t[e.store])}))};function use(e,t={}){if("function"!=typeof e)throw new TypeError("Plugin must be a function");e.options=t,registerPlugin(e)}function load(e){data.plugins.forEach((t=>{t(e.constructor,e,t.options)}))}use(propsPropagation),use(serverSideLoadProps);var plugin={use:use,load:load};let appCounter=0;class Doz{constructor(cfg={}){if(this.baseTemplate=`<${TAG.APP}></${TAG.APP}>`,REGEX.IS_ID_SELECTOR.test(cfg.root)&&(cfg.root=document.getElementById(cfg.root.substring(1))),REGEX.IS_ID_SELECTOR.test(cfg.template)&&(cfg.template=document.getElementById(cfg.template.substring(1)),cfg.template=cfg.template.innerHTML),!(cfg.root instanceof HTMLElement||cfg.root instanceof ShadowRoot))throw new TypeError("root must be an HTMLElement or an valid ID selector like #example-root");if(!cfg.mainComponent&&!(cfg.template instanceof HTMLElement||"string"==typeof cfg.template||"function"==typeof cfg.template))throw new TypeError("template must be a string or an HTMLElement or a function or an valid ID selector like #example-template");if(cfg.root.hasChildNodes){const e=cfg.root.firstElementChild;makeSureAttach(e),e&&!e._dozAttach[ALREADY_WALKED]&&e.parentNode.removeChild(e)}this.cfg=Object.assign({},{components:[],shared:{},useShadowRoot:!1,propsListener:null,propsListenerAsync:null,listeners:null,actions:{},autoDraw:!0,enableExternalTemplate:!1},cfg),Object.defineProperties(this,{_lastUId:{value:0,writable:!0},_components:{value:{},writable:!0},_usedComponents:{value:{},writable:!0},_cache:{value:new Map},_onAppReadyCB:{value:[],writable:!0},_onAppComponentsMounted:{value:new Map,writable:!0},_callAppReady:{value:function(){this._onAppReadyCB.forEach((e=>{"function"==typeof e&&e._instance&&e.call(e._instance)})),this._onAppReadyCB=[]}},_onAppDrawCB:{value:[],writable:!0},_onAppCB:{value:{},writable:!0},isWebComponent:{value:this.cfg.isWebComponent},byAppCreate:{value:this.cfg.byAppCreate},useShadowRoot:{value:this.cfg.useShadowRoot,writable:!0,enumerable:!0},_root:{value:this.cfg.root},appId:{value:window.DOZ_APP_ID||Math.random().toString(36).substring(2,15),enumerable:!0},appIntId:{value:appCounter++,enumerable:!0},action:{value:bind$1(this.cfg.actions,this),enumerable:!0},onAppEmit:{value:this.cfg.onAppEmit,writable:!0,enumerable:!0},shared:{value:this.cfg.shared,writable:!0,enumerable:!0},setAllAttributes:{value:this.cfg.setAllAttributes,writable:!0,enumerable:!0},onVdomUpdateElement:{value:this.cfg.onVdomUpdateElement,writable:!0,enumerable:!0},cacheStores:{value:{kCache:new Map,hCache:new Map},enumerable:!0},mount:{value:function(template,root,parent=this._tree){if("string"==typeof root&&(root=document.querySelector(root)),root=root||parent._rootElement,!(root instanceof HTMLElement))throw new TypeError("root must be an HTMLElement or an valid selector like #example-root");const contentStr=this.cfg.enableExternalTemplate?eval("`"+toLiteralString(template)+"`"):template,autoCmp={tag:TAG.MOUNT,cfg:{props:{},template:e=>contentStr}};return createInstance({root:root,template:`<${TAG.MOUNT}></${TAG.MOUNT}>`,app:this,parentCmp:parent,autoCmp:autoCmp,mount:!0})},enumerable:!0}}),Array.isArray(this.cfg.components)?this.cfg.components.forEach((e=>{"object"==typeof e&&"string"==typeof e.tag&&"object"==typeof e.cfg&&(this._components[e.tag]=e)})):"object"==typeof this.cfg.components&&Object.keys(this.cfg.components).forEach((e=>{this._components[e]={tag:e,cfg:this.cfg.components[e]}})),plugin.load(this),directives.callAppInit(this),this.cfg.mainComponent?this._tree=createInstance({mountMainComponent:!0,root:this.cfg.root,component:this.cfg.mainComponent,app:this,innerHTML:this.cfg.innerHTML}):(this._components[TAG.APP]={tag:TAG.APP,cfg:{template:"function"==typeof cfg.template?cfg.template:function(){const contentStr=toLiteralString(cfg.template);return/\${.*?}/g.test(contentStr)?eval("`"+contentStr+"`"):contentStr}}},Object.keys(cfg).forEach((e=>{["template","root"].includes(e)||(this._components[TAG.APP].cfg[e]=cfg[e])}))),this.cfg.listeners&&Object.keys(this.cfg.listeners).forEach((e=>{this.on(e,this.cfg.listeners[e])})),!this.cfg.mainComponent&&this.cfg.autoDraw&&this.draw(),this.canAppReady()}canAppReady(){this._onAppComponentsMounted.size?setTimeout((()=>{this.canAppReady()})):(this._callAppReady(),this.emit("ready",this))}draw(){return this.cfg.autoDraw||(this.cfg.root.innerHTML=""),this._tree=createInstance({root:this.cfg.root,template:this.baseTemplate,app:this}),this}get mainComponent(){return this._tree}on(e,t){if("string"!=typeof e)throw new TypeError("Event must be a string");if("function"!=typeof t)throw new TypeError("Callback must be a function");return this._onAppCB[e]||(this._onAppCB[e]=[]),this._onAppCB[e].push(t),this}emit(e,...t){return this._onAppCB[e]&&this._onAppCB[e].forEach((e=>{e.apply(this,t)})),this.onAppEmit&&this.onAppEmit(e,...t),this}generateUId(){return this.appId+"-"+ ++this._lastUId}}function component(e,t={}){if("string"!=typeof e)throw new TypeError("Tag must be a string");if(!REGEX.IS_CUSTOM_TAG.test(e))throw new TypeError("Tag must contain a dash (-) like my-component");registerComponent({tag:e,cfg:t})}function globalMixin(e){mixin(Component.prototype,e)}function appCreate(e,t,n){let o=Object.assign({root:e,mainComponent:t,byAppCreate:!0},n);return new Doz(o)}var tag=function(e){return function(t){t.tag=e}};function createStyleSoftEntrance(){if(!document.getElementById("style--soft-entrance--")){const e=document.createElement("style");e.id="style--soft-entrance--",e.innerHTML="[data-soft-entrance] {visibility: hidden!important;}",document.head.appendChild(e)}}function createDozWebComponent(e,t,n=[],o="dwc",a,r=[],p=[]){data.webComponents.tags[e]=data.webComponents.tags[e]||{},o&&(o+="-"),customElements.define(o+e,class extends HTMLElement{static get observedAttributes(){return n}constructor(){super()}connectedCallback(){let o={},l=null,i="",c=this.hasAttribute("data-no-shadow"),s=c?this:this.attachShadow({mode:"open"}),d=this;for(let e,t=0,a=this.attributes,r=a.length;t<r;t++)e=a[t],"data-id"!==e.nodeName?n.includes(e.nodeName)&&(o[dashToCamel(e.nodeName)]=e.nodeValue):l=e.nodeValue;let u=function(){let t=this.app.byAppCreate?this:this.children[0];r.forEach((e=>{t[e]&&(d[e]=t[e].bind(t))})),d.removeAttribute("data-soft-entrance"),t.props=Object.assign({},t.props,o);let n=Object.keys(data.webComponents.tags[e]).length++;if(data.webComponents.tags[e][l||n]=t,null!==l){if(data.webComponents.ids[l])return console.warn(l+": id already exists for DozWebComponent");data.webComponents.ids[l]=t}},m=function(e,...t){if(p.indexOf(e)>-1){let n=new CustomEvent(e,{detail:t});d.dispatchEvent(n)}};i=this.innerHTML.trim(),this.innerHTML="";let h=t||a||e;t&&"object"!=typeof t?(t.__postListeners={onAppReady:u},this.dozApp=appCreate(s,t,{isWebComponent:!0,useShadowRoot:!c,innerHTML:i,onAppEmit:m})):this.dozApp=new Doz({root:s,isWebComponent:!0,useShadowRoot:!c,template:e=>e`
                            <${h}>${i}</${h}>
                        `,onAppReady:u,onAppEmit:m})}attributeChangedCallback(e,t,n){if(!this.dozApp)return;(this.dozApp.byAppCreate?this.dozApp.mainComponent:this.dozApp.mainComponent.children[0]).props[dashToCamel(e)]=n}})}function defineWebComponent(e,t,n=[],o=[],a=[]){createDozWebComponent(e,t,n,"",null,o,a)}function defineWebComponentFromGlobal(e,t,n=[],o=[],a=[]){createDozWebComponent(e,null,n,"",t,o,a)}createStyleSoftEntrance();const{directive:directive$b}=directives;var store=function(){directive$b(":store",{createStore(e,t){if("string"==typeof t){if(void 0!==e.app._stores[t])throw new Error(`Store already defined: ${t}`);e.app._stores[t]=e.props,e.store=t}},syncStore(e,t){"string"==typeof t&&void 0!==e.app._stores[t]&&(e.app._stores[t]=e.props)},onAppInit(e){Object.defineProperties(e,{_stores:{value:{},writable:!0},getStore:{value:function(t){return e._stores[t]},enumerable:!0}})},onAppComponentCreate(e){Object.defineProperties(e,{getStore:{value:function(t){return e.app._stores[t]},enumerable:!0}}),void 0!==e.store&&void 0===e.props["d:store"]&&this.createStore(e,e.store)},onComponentCreate(e,t){this.createStore(e,t)},onAppComponentLoadProps(e){this.syncStore(e,e.store)},onAppComponentSetProps(e){this.syncStore(e,e.store)},onAppComponentSetConfig(e,t){"string"==typeof t.store&&this.createStore(e,t.store)},onAppComponentDestroy(e){e.store&&e.app._stores[e.store]&&delete e.app._stores[e.store]}})};const{directive:directive$a}=directives;var id=function(){directive$a(":id",{createId(e,t){"string"==typeof t&&(e.app._ids[t]=e,e.id=t)},onAppInit(e){Object.defineProperties(e,{_ids:{value:{},writable:!0},getComponentById:{value:function(t){return e._ids[t]},enumerable:!0}})},onAppComponentCreate(e){Object.defineProperties(e,{getComponentById:{value:function(t){return e.app._ids[t]},enumerable:!0},getCmp:{value:function(t){return e.app._ids[t]},enumerable:!0}}),void 0!==e.id&&void 0===e.props["d:id"]&&this.createId(e,e.id)},onComponentCreate(e,t){this.createId(e,t)},onAppComponentSetConfig(e,t){"string"==typeof t.id&&this.createId(e,t.id)},onAppComponentDestroy(e){e.id&&e.app._ids[e.id]&&delete e.app._ids[e.id]}})};const{directive:directive$9}=directives;var alias=function(){directive$9(":alias",{createAlias(e,t){"string"==typeof t&&(e.alias=t)},onAppInit(e){Object.defineProperties(e,{getComponent:{value:function(e){return this._tree?this._tree.children[e]:void 0},enumerable:!0}})},onAppComponentCreate(e){Object.defineProperties(e,{getComponent:{value:function(e){return this.children?this.children[e]:void 0},enumerable:!0}})},onComponentCreate(e,t){this.createAlias(e,t)},onAppComponentSetConfig(e,t){"string"==typeof t.alias&&this.createAlias(e,t.alias)},onAppComponentAssignIndex:(e,t)=>e.alias?e.alias:t})};const{directive:directive$8}=directives;var on=function(){directive$8(":on-$event",{onAppComponentCreate(e){Object.defineProperties(e,{_callback:{value:{},writable:!0},emit:{value:function(t,...n){e._callback&&("function"==typeof e._callback[t]?e._callback[t].apply(e.parent,n):void 0!==e._callback[t]&&void 0!==e.parent[e._callback[t]]&&"function"==typeof e.parent[e._callback[t]]&&e.parent[e._callback[t]].apply(e.parent,n))},enumerable:!0}})},onComponentCreate(e,t,n){let o={};o[n.event]=t,Object.assign(e._callback,o)}})};const{directive:directive$7}=directives;directive$7(":onbeforemount",{onComponentBeforeMount:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),directive$7(":onmount",{onComponentMount(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),directive$7(":onmountasync",{onComponentMountAsync(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),directive$7(":onafterrender",{onComponentAfterRender:(e,t,n)=>"function"==typeof n?n(e,t):e.parent&&"function"==typeof e.parent[n]?e.parent[n].call(e.parent,e,t):void 0}),directive$7(":onbeforeupdate",{onComponentBeforeUpdate:(e,t,n)=>"function"==typeof n?n(e,t):e.parent&&"function"==typeof e.parent[n]?e.parent[n].call(e.parent,e,t):void 0}),directive$7(":onupdate",{onComponentUpdate(e,t,n){"function"==typeof n?n(e,t):e.parent&&"function"==typeof e.parent[n]&&e.parent[n].call(e.parent,e,t)}}),directive$7(":onbeforeunmount",{onComponentBeforeUnmount:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),directive$7(":onunmount",{onComponentUnmount(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),directive$7(":onbeforedestroy",{onComponentBeforeDestroy:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),directive$7(":ondestroy",{onComponentDestroy(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),directive$7(":onloadprops",{onComponentLoadProps(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}});var hooks=function(){directive$7(":onbeforecreate",{onComponentBeforeCreate:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),directive$7(":oncreate",{onComponentCreate(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}})};const{directive:directive$6}=directives;var ref=function(){directive$6("ref",{onAppComponentCreate(e){Object.defineProperties(e,{ref:{value:{},writable:!0,enumerable:!0}})},onComponentDOMElementCreate(e,t,n){e.ref[n]=t}})};const{directive:directive$5}=directives;var is=function(){directive$5("is",{hasDataIs:e=>e.dataset&&e.dataset.is,onAppComponentAssignName(e,t){if(this.hasDataIs(t))return t.dataset.is},onAppComponentPropsAssignName(e,t,n){if(this.hasDataIs(e))return dashToCamel(t)},onComponentDOMElementCreate(e,t,n,o){t.dataset.is=n,o||doCreateInstance(e,t)}})};const{directive:directive$4}=directives;var bind=function(){directive$4("bind",{onAppComponentCreate(e){Object.defineProperties(e,{_boundElements:{value:{},writable:!0}})},onAppComponentUpdate(e,t){Object.keys(e._boundElements).length&&this.updateBoundElementsByChanges(e,t)},onAppComponentLoadProps(e){this.updateBoundElementsByPropsIteration(e)},onComponentDOMElementCreate(e,t,n,o){this.canBind(t)&&this.setBind(e,t,n)},canBind:e=>-1!==["INPUT","TEXTAREA","SELECT"].indexOf(e.nodeName),setBind(e,t,n){if(void 0===e.props[n])return;["compositionstart","compositionend","input","change"].forEach((function(o){t.addEventListener(o,(function(t){let o;if("checkbox"===this.type)if(this.defaultValue){o=[...e.appRoot.querySelectorAll(`input[name=${this.name}][type=checkbox]:checked`)].map((e=>e.value)),e.props[n]=o}else e.props[n]=this.checked;else o=this.value,this.multiple&&(o=[...this.options].filter((e=>e.selected)).map((e=>e.value))),e.props[n]=o}))})),void 0!==e._boundElements[n]?e._boundElements[n].push(t):e._boundElements[n]=[t],delay((()=>{this.updateBoundElement(t,e.props[n],e)}))},updateBoundElementsByChanges(e,t){t.forEach((t=>{let n=t.newValue,o=t.property;this.updateBoundElements(e,n,o)}))},updateBoundElementsByPropsIteration(e){let t=this;!function n(o){let a=Object.keys(o);for(let r=0,p=a.length;r<p;r++){let p=a[r];o[p]instanceof Object&&null!==o[p]?n(o[p]):t.updateBoundElements(e,o[p],p)}}(e._rawProps)},updateBoundElements(e,t,n){Object.prototype.hasOwnProperty.call(e._boundElements,n)&&e._boundElements[n].forEach((n=>{this.updateBoundElement(n,t,e)}))},updateBoundElement(e,t,n){if("checkbox"===e.type)if(e.defaultValue){if(Array.isArray(t)){[...n.appRoot.querySelectorAll(`input[name=${e.name}][type=checkbox]`)].forEach((e=>e.checked=t.includes(e.value)))}}else e.checked=t;else"radio"===e.type?e.checked=e.value===t:"select-multiple"===e.type&&Array.isArray(t)?[...e.options].forEach((e=>e.selected=t.includes(e.value))):e.value=t}})};function queue(e,t){e&&new Promise(e).then((()=>queue(t.shift(),t)))}const{directive:directive$3}=directives;var show=function(){directive$3("show",{onAppComponentCreate(e){},setVisible(e,t){const n=e._dozAttach.__animationDirectiveValue;e._dozAttach.__showOriginDisplay=extractStyleDisplayFromDozProps(e)||"";let o=!1;void 0===e._dozAttach.__showInitialValue&&(e._dozAttach.__showInitialValue=t,o=!t),e._dozAttach.__prevValueOfShow!==t&&(e._dozAttach.__prevValueOfShow=t,n&&!o?(e._dozAttach.__animationsList||(e._dozAttach.__animationsList=[]),e._dozAttach.__animationUsedByShowDirective=!0,e._dozAttach.__animationsList.push((n=>{t?(e.style.display=e._dozAttach.__showOriginDisplay,e._dozAttach.__animationShow((()=>{e.style.display=e._dozAttach.__showOriginDisplay,e._dozAttach.__animationUsedByShowDirective=!1,n()}))):e._dozAttach.__animationHide((()=>{e.style.display="none",e._dozAttach.__animationUsedByShowDirective=!1,n()}))})),n.queue?e._dozAttach.__animationIsRunning||queue(e._dozAttach.__animationsList.shift(),e._dozAttach.__animationsList):new Promise(e._dozAttach.__animationsList.shift()).then()):e.style.display=t?e._dozAttach.__showOriginDisplay:"none")},onComponentDOMElementCreate(e,t,n){this.setVisible(t,n)},onComponentDOMElementUpdate(e,t,n){this.setVisible(t,n)}})};function wait(e,t,n=1e3,o){let a,r=0,p=function(){window.cancelAnimationFrame(a),a=null},l=function(){if(r>=n)return console.warn("wait, max cycles exceeded "+n),void("function"==typeof o&&o());e(p)?(a&&p(),t()):(r++,a=window.requestAnimationFrame(l))};a=window.requestAnimationFrame(l)}function animateHelper(e,t,n,o){if("function"==typeof n?(o=n,n={}):n||(n={}),"hide"===n.mode&&"none"===e.style.display)return;e._dozAttach.__animationIsRunning&&(e.classList.remove(e._dozAttach.__lastAnimationName),e._dozAttach.__animationIsRunning=!1,e._dozAttach.__lockedForAnimation=!1,e.removeEventListener("animationend",e._dozAttach.__handleAnimationEnd)),e._dozAttach.__animationIsRunning=!0;let a=window.getComputedStyle(e);function r(){e.classList.remove(n.classLib),e.classList.remove(t),e._dozAttach.__animationIsRunning=!1,e._dozAttach.__lockedForAnimation=!1,e.style.animationDelay="",e.style.webkitAnimationDelay="",e.style.mozAnimationDelay="",e.style.animationDuration="",e.style.webkitAnimationDuration="",e.style.mozAnimationDuration="",e.style.animationIterationCount="",e.style.webkitAnimationIterationCount="",e.style.mozAnimationIterationCount="",e.removeEventListener("animationend",r),"function"==typeof o&&o(),"function"==typeof n.cb&&n.cb()}n.classLib=n.classLib||"animated",e.classList.add(n.classLib),e.classList.add(t),e._dozAttach.__lastAnimationName=t,e._dozAttach.__animationOriginDisplay=a.display,"inline"===e._dozAttach.__animationOriginDisplay&&(e.style.display="inline-block"),n.delay&&(e.style.animationDelay=n.delay,e.style.webkitAnimationDelay=n.delay,e.style.mozAnimationDelay=n.delay),n.duration&&(e.style.animationDuration=n.duration,e.style.webkitAnimationDuration=n.duration,e.style.mozAnimationDuration=n.duration),n.iterationCount&&(e.style.animationIterationCount=n.iterationCount,e.style.webkitAnimationIterationCount=n.iterationCount,e.style.mozAnimationIterationCount=n.iterationCount),e.addEventListener("animationend",r),e._dozAttach.__handleAnimationEnd=r,e._dozAttach.__animationReset=()=>r()}window.requestAnimationFrame=window.requestAnimationFrame||window.setTimeout,window.cancelAnimationFrame=window.cancelAnimationFrame||window.clearTimeout;const{directive:directive$2}=directives;var animate=function(){directive$2("animate",{onAppComponentCreate(e){Object.defineProperties(e,{animate:{value:animateHelper,enumerable:!0},elementsWithAnimation:{value:new Map,writable:!0}})},createLockRemoveInstanceByCallback(e){e.lockRemoveInstanceByCallback=(t,...n)=>{if(e.lockRemoveInstanceByCallbackIsCalled)return;e.lockRemoveInstanceByCallbackIsCalled=!0;let o=[];for(let[t,n]of e.elementsWithAnimation){let a=t,r=n;o.push(new Promise((t=>{if(!document.body.contains(a))return t();wait((e=>a._dozAttach.__animationUsedByShowDirective?(e(),!0):!a._dozAttach.__animationIsRunning),(()=>{let n={duration:r.hide.duration,delay:r.hide.delay,iterationCount:r.hide.iterationCount,cb:r.hide.cb,classLib:r.classLib};e.animate(a,r.hide.name,n,(()=>{a.style.display="none",t()}))}),1e3,(()=>{a._dozAttach.__animationReset()}))})))}Promise.all(o).then((()=>{e.lockRemoveInstanceByCallback=null,e.lockRemoveInstanceByCallbackIsCalled=!1,t.apply(e,n)}),(e=>{throw new Error(e)}))}},createAnimations(e,t,n){if(!t._dozAttach.__lockedForAnimation){if(t._dozAttach.__lockedForAnimation=!0,"string"==typeof n&&(n={show:n,hide:n}),t._dozAttach.__animationDirectiveValue=n,n.show){"object"!=typeof n.show&&(n.show={name:n.show});let o={duration:n.show.duration,delay:n.show.delay,iterationCount:n.show.iterationCount,cb:n.show.cb,classLib:n.classLib,mode:"show"};t._dozAttach.__animationShow=a=>e.animate(t,n.show.name,o,a),wait((e=>t._dozAttach.__animationUsedByShowDirective?(e(),!0):!t._dozAttach.__animationIsRunning),(()=>{document.body.contains(t)&&(t._dozAttach.__animationOriginDisplay&&(t.style.display=t._dozAttach.__animationOriginDisplay),"none"!==t.style.display&&e.animate(t,n.show.name,o))}),1e3,(()=>{t._dozAttach.__animationReset()}))}if(n.hide){"object"!=typeof n.hide&&(n.hide={name:n.hide});let o={duration:n.hide.duration,delay:n.hide.delay,iterationCount:n.hide.iterationCount,cb:n.hide.cb,classLib:n.classLib,mode:"hide"};t._dozAttach.__animationHide=a=>e.animate(t,n.hide.name,o,a),this.createLockRemoveInstanceByCallback(e)}e.elementsWithAnimation.set(t,n),setTimeout((()=>{Object.keys(e.children).forEach((t=>{const n=e.children[t],o=n.getHTMLElement(),a=e.elementsWithAnimation.get(o);a&&(n.lockRemoveInstanceByCallback||(n.elementsWithAnimation.set(o,a),this.createLockRemoveInstanceByCallback(n)))}))}))}},onComponentDOMElementCreate(e,t,n){this.createAnimations(e,t,n)},onAppComponentMount(e){if(e.elementsWithAnimation&&e.elementsWithAnimation.size)for(let[t,n]of e.elementsWithAnimation)this.createAnimations(e,t,n)}})};const{directive:directive$1}=directives;var lazy=function(){directive$1("lazy",{onAppInit(e){Object.defineProperties(e,{lazyComponentsList:{value:new Set,enumerable:!1}}),window.addEventListener("scroll",(()=>{e.lazyComponentsList.forEach((t=>{this.canRunMount(e,t)}))}))},onComponentCreate(e){e.waitMount=!0,e.appReadyExcluded=!0,e.app.lazyComponentsList.add(e)},onComponentWaitMount(e){this.canRunMount(e.app,e)},canRunMount(e,t){(function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(t.$domEl)&&(t.runMount(),e.lazyComponentsList.delete(t))}})},bootstrap=function(){store(),id(),alias(),on(),hooks(),ref(),is(),bind(),show(),animate(),lazy()};const{directive:directive}=directives;bootstrap(),Object.defineProperties(Doz,{collection:{value:collection,enumerable:!0},compile:{value:compile,enumerable:!0},Component:{value:Component,enumerable:!0},component:{value:component,enumerable:!0},define:{value:component,enumerable:!0},h:{value:h,enumerable:!0},update:{value:update,enumerable:!0},mixin:{value:globalMixin,enumerable:!0},use:{value:use,enumerable:!0},directive:{value:directive,enumerable:!0},version:{value:"4.0.2",enumerable:!0},tag:{value:tag,enumerable:!0},createDozWebComponent:{value:createDozWebComponent,enumerable:!0},defineWebComponent:{value:defineWebComponent,enumerable:!0},defineWebComponentFromGlobal:{value:defineWebComponentFromGlobal,enumerable:!0},appCreate:{value:appCreate,enumerable:!0},createInstance:{value:createInstance,enumerable:!0}});const version=Doz.version;export{Component,appCreate,collection,compile,component,createDozWebComponent,createInstance,Doz as default,component as define,defineWebComponent,defineWebComponentFromGlobal,directive,h,globalMixin as mixin,tag,update,use,version};
