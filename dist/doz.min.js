function e(t,n){if("object"!=typeof t||null==t)throw new TypeError("expected an object!");let o=Object.assign({},t),a=Object.keys(t);for(let t=a.length-1;t>=0;--t){let r=o[a[t]];"function"==typeof r?o[a[t]]=r.bind(n):"object"==typeof r&&null!=r&&(o[a[t]]=e(r,n))}return o}const t=/\n/g,n=/\s+/g;let o;const a={create(e,o){let a;e=(e=e.replace(t," ")).replace(n," ");let r=document.createElement("div");return r.innerHTML=e,o&&r.childNodes.length>1?(a=document.createElement(o),a.innerHTML=r.innerHTML):a=r.firstChild||document.createTextNode(""),a},decode:e=>(o=o||document.createElement("div"),o.innerHTML=e,o.textContent)},r="http://www.w3.org/2000/svg",p="dz-root",i="dz-app",l="dz-empty",s="dz-mount",c="dz-slot",d="dz-text-node",u="dz-iterate-node",h={IS_DIRECTIVE:/^d[-:][\w-]+$/,IS_CUSTOM_TAG:/^\w+-[\w-]+$/,IS_CUSTOM_TAG_STRING:/<\w+-[\w-]+/,IS_LISTENER:/^on/,IS_ID_SELECTOR:/^#[\w-_:.]+$/,IS_PARENT_METHOD:/^parent.(.*)/,IS_STRING_QUOTED:/^"\w+"/,IS_SVG:/^svg$/,GET_LISTENER:/^this.(.*)\((.*)\)/,GET_LISTENER_SCOPE:/^scope.(.*)\((.*)\)/,IS_LISTENER_SCOPE:/(^|\()scope[.)]/g,TRIM_QUOTES:/^["'](.*)["']$/,THIS_TARGET:/\B\$this(?!\w)/g,HTML_MARKUP:/<!--[^]*?(?=-->)-->|<(\/?)([a-z][-.0-9_a-z]*)\s*([^>]*?)(\/?)>|<\/>/gi,HTML_ATTRIBUTE:/(^|\s)([\w-:]+)(\s*=\s*("([^"]+)"|'([^']+)'|(\S+)))?/gi,MATCH_NLS:/\n\s+/gm,REPLACE_QUOT:/"/g,REPLACE_D_DIRECTIVE:/^d[-:]/,EXTRACT_STYLE_DISPLAY_PROPERTY:/display(?:\s+)?:(?:\s+)?([\w-]+)/},m="forceupdate";var f={components:{},webComponents:{tags:{},ids:{}},plugins:[],directives:{},directivesKeys:[],directivesMethodsMap:{}};function y(e){const t=e.tag.toUpperCase();Object.prototype.hasOwnProperty.call(f.components,t)&&console.warn("Doz",`component ${t} overwritten`),f.components[t]=e}function _(e){f.plugins.push(e)}function g(e,t={}){if("string"!=typeof e)throw new TypeError("Doz directive name must be a string");if("object"!=typeof t||!t)throw new TypeError("Doz directive config must be an object");":"===e[0]&&(t._onlyDozComponent=!0,e=e.substring(1));let n=[];-1!==(e=e.toLowerCase()).indexOf("-")&&(n=e.split("-"),e=n[0],n.shift()),t.name=e,t._keyArguments=n.map((e=>e.substring(1))),Object.prototype.hasOwnProperty.call(f.directives,e)&&console.warn("Doz",`directive ${e} overwritten`),f.directives[e]=t,f.directivesKeys.includes(e)||f.directivesKeys.push(e);for(let e in t)"function"==typeof t[e]&&"o"===e[0]&&"n"===e[1]&&"A"===e[2]&&"p"===e[3]&&"p"===e[4]&&(t[e].___this___=t,f.directivesMethodsMap[e]?f.directivesMethodsMap[e].push(t[e]):f.directivesMethodsMap[e]=[t[e]])}var C={registerComponent:y,registerPlugin:_,getComponent:function(e){return e=e.toUpperCase(),f.components[e]},registerDirective:g,removeAll:function(){f.components={}},data:f};function A(...e){let t,n=e.shift();for(let n=0;n<e.length;n++)if("function"==typeof e[n]){t=e[n];break}if(f.directivesMethodsMap[n])for(let o=0;o<f.directivesMethodsMap[n].length;o++){let a=f.directivesMethodsMap[n][o],r=a.apply(a.___this___,e);void 0!==r&&t&&t(r)}}var b={callAppInit:function(...e){let t=["onAppInit"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentCreate:function(...e){let t=["onAppComponentCreate"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentLoadProps:function(...e){let t=["onAppComponentLoadProps"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentSetConfig:function(...e){let t=["onAppComponentSetConfig"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentSetProps:function(...e){let t=["onAppComponentSetProps"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentDestroy:function(...e){let t=["onAppComponentDestroy"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentAssignIndex:function(...e){let t=["onAppComponentAssignIndex"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentBeforeCreate:function(...e){let t=["onAppComponentBeforeCreate"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentConfigCreate:function(...e){let t=["onAppComponentConfigCreate"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentBeforeMount:function(...e){let t=["onAppComponentBeforeMount"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentMount:function(...e){let t=["onAppComponentMount"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentBeforeDestroy:function(...e){let t=["onAppComponentBeforeDestroy"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentUnmount:function(...e){let t=["onAppComponentUnmount"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentBeforeUnmount:function(...e){let t=["onAppComponentBeforeUnmount"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentAfterRender:function(...e){let t=["onAppComponentAfterRender"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentDrawByParent:function(...e){let t=["onAppComponentDrawByParent"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentUpdate:function(...e){let t=["onAppComponentUpdate"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentBeforeUpdate:function(...e){let t=["onAppComponentBeforeUpdate"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentMountAsync:function(...e){let t=["onAppComponentMountAsync"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppWalkDOM:function(...e){let t=["onAppWalkDOM"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentAssignName:function(...e){let t=["onAppComponentAssignName"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppDOMElementCreate:function(...e){let t=["onAppDOMElementCreate"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppDynamicInstanceCreate:function(...e){let t=["onAppDynamicInstanceCreate"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentPropsAssignName:function(...e){let t=["onAppComponentPropsAssignName"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentRenderOverwrite:function(...e){let t=["onAppComponentRenderOverwrite"];Array.prototype.push.apply(t,e),A.apply(null,t)},callAppComponentWaitMount:function(...e){let t=["onAppComponentWaitMount"];Array.prototype.push.apply(t,e),A.apply(null,t)}};function w(e){return"d"===e[0]&&("-"===e[1]||":"===e[1])}function v(e){let t=e=e.replace(h.REPLACE_D_DIRECTIVE,""),n=[];return-1!==t.indexOf("-")&&(n=t.split("-"),t=n[0],n.shift()),[t,n]}function E(...e){let t=e[0],n=e[1];e.shift();let o=n._directiveProps||function(e){let t;t=function(e){for(let t in e)return!1;return!0}(e.props)?e._rawProps:e.props,e._directiveProps||(e._directiveProps={});for(let n in t)if(w(n)){let o=n.substring(2);e._directiveProps[o]=t[n]}return e._directiveProps}(n);n._directiveKeys||(n._directiveKeys=Object.keys(o)),n._directiveKeys.forEach((n=>{let a=[],r={},p=n;-1!==n.indexOf("-")&&(a=n.split("-"),n=a[0],a.shift());let i=f.directives[n];if(i&&"function"==typeof i[t]){let n=Object.assign([],e);n.push(o[p]),i._keyArguments.forEach(((e,t)=>r[e]=a[t])),n.push(r),i[t].apply(i,n)}}))}var P={callComponentBeforeCreate:function(...e){let t=["onComponentBeforeCreate"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentCreate:function(...e){let t=["onComponentCreate"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentBeforeMount:function(...e){let t=["onComponentBeforeMount"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentMount:function(...e){let t=["onComponentMount"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentMountAsync:function(...e){let t=["onComponentMountAsync"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentAfterRender:function(...e){let t=["onComponentAfterRender"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentBeforeUpdate:function(...e){let t=["onComponentBeforeUpdate"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentUpdate:function(...e){let t=["onComponentUpdate"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentBeforeUnmount:function(...e){let t=["onComponentBeforeUnmount"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentUnmount:function(...e){let t=["onComponentUnmount"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentBeforeDestroy:function(...e){let t=["onComponentBeforeDestroy"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentDestroy:function(...e){let t=["onComponentDestroy"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentLoadProps:function(...e){let t=["onComponentLoadProps"];Array.prototype.push.apply(t,e),E.apply(null,t)},callComponentDOMElementCreate:function(e,t,n){let o="onComponentDOMElementCreate";if(!t._dozAttach.props)return;let a=Object.keys(t._dozAttach.props);for(let r=0;r<a.length;r++){let p=a[r],i=t._dozAttach.props[a[r]];if(w(p)){let[a,r]=v(p),l=i,s=f.directives[a];s&&s[o]&&s[o].apply(s,[e,t,l,n,r])}}},callComponentDOMElementUpdate:function(e,t){let n="onComponentDOMElementUpdate";if(!t._dozAttach.props)return;let o=Object.keys(t._dozAttach.props);for(let a=0;a<o.length;a++){let r=o[a],p=t._dozAttach.props[o[a]];if(w(r)){let[o,a]=v(r),i=p,l=f.directives[o];l&&l[n]&&l[n].apply(l,[e,t,i,a])}}},callComponentVNodeTick:function(e,t,n){if(!t||!t.props)return;let o="onComponentVNodeTick",a=Object.keys(t.props);for(let r=0;r<a.length;r++){let p=a[r];if(w(p)){let[a,r]=v(p),i=t.props[p],l=f.directives[a];l&&l[o]&&l[o].apply(l,[e,t,n,i,r])}}},callComponentWaitMount:function(...e){let t=["onComponentWaitMount"];Array.prototype.push.apply(t,e),E.apply(null,t)}};var I=Object.assign({directive:function(e,t={}){g(e,t)}},b,P);var z={callBeforeCreate:function(e){if(I.callAppComponentBeforeCreate(e),I.callComponentBeforeCreate(e),"function"==typeof e.onBeforeCreate)return e.onBeforeCreate.call(e)},callCreate:function(e){I.callAppComponentCreate(e),I.callComponentCreate(e),"function"==typeof e.onCreate&&e.onCreate.call(e),e.app.emit("componentCreate",e)},callConfigCreate:function(e){I.callAppComponentConfigCreate(e),"function"==typeof e.onConfigCreate&&e.onConfigCreate.call(e),e.parent&&"function"==typeof e.parent[e.__onConfigCreate]&&e.parent[e.__onConfigCreate].call(e.parent,e),e.app.emit("componentConfigCreate",e)},callBeforeMount:function(e){if(I.callAppComponentBeforeMount(e),I.callComponentBeforeMount(e),"function"==typeof e.onBeforeMount)return e.onBeforeMount.call(e)},callMount:function(e){I.callAppComponentMount(e),I.callComponentMount(e),"function"==typeof e.onMount&&e.onMount.call(e),e.app.emit("componentMount",e)},callMountAsync:function(e){I.callAppComponentMountAsync(e),I.callComponentMountAsync(e),"function"==typeof e.onMountAsync&&e.onMountAsync.call(e),e.app.emit("componentMountAsync",e)},callBeforeUpdate:function(e,t){if(I.callAppComponentBeforeUpdate(e,t),I.callComponentBeforeUpdate(e,t),"function"==typeof e.onBeforeUpdate)return e.onBeforeUpdate.call(e,t)},callUpdate:function(e,t){I.callAppComponentUpdate(e,t),I.callComponentUpdate(e,t),"function"==typeof e.onUpdate&&e.onUpdate.call(e,t),e.app.emit("componentUpdate",e,t)},callDrawByParent:function(e,t,n){if(e)return I.callAppComponentDrawByParent(e,t,n),"function"==typeof e.onDrawByParent?e.onDrawByParent.call(e,t,n):e.parent&&"function"==typeof e.parent[e.__onDrawByParent]?e.parent[e.__onDrawByParent].call(e.parent,e,t,n):void 0},callBeforeUnmount:function(e){if(I.callAppComponentBeforeUnmount(e),I.callComponentBeforeUnmount(e),"function"==typeof e.onBeforeUnmount)return e.onBeforeUnmount.call(e)},callUnmount:function(e){I.callAppComponentUnmount(e),I.callComponentUnmount(e),"function"==typeof e.onUnmount&&e.onUnmount.call(e),e.app.emit("componentUnmount",e)},callBeforeDestroy:function(e){if(I.callAppComponentBeforeDestroy(e),I.callComponentBeforeDestroy(e),"function"==typeof e.onBeforeDestroy)return e.onBeforeDestroy.call(e)},callDestroy:function(e){I.callAppComponentDestroy(e),I.callComponentDestroy(e),e.app.emit("componentDestroy",e);const t=document.getElementById(e.uId+"--style"),n=document.getElementById(e.uId+"--style-reset");t&&t.parentNode.removeChild(t),n&&n.parentNode.removeChild(n),e._unmountedPlaceholder&&e._unmountedPlaceholder.parentNode&&e._unmountedPlaceholder.parentNode.removeChild(e._unmountedPlaceholder),"function"==typeof e.onDestroy&&(e.onDestroy.call(e),e=null)},callLoadProps:function(e){I.callAppComponentLoadProps(e),I.callComponentLoadProps(e),"function"==typeof e.onLoadProps&&e.onLoadProps.call(e),e.app.emit("componentLoadProps",e)},callWaitMount:function(e){I.callAppComponentWaitMount(e),I.callComponentWaitMount(e),"function"==typeof e.onWaitMount&&e.onWaitMount.call(e),e.app.emit("componentWaitMount",e)}};function M(e){return e.replace(/(-\w)/g,(function(e){return e[1].toUpperCase()}))}const k=new Map,B=Object.create(null),T=new Map;var R={kCache:k,tplCache:B,hCache:T};const S=new RegExp(`</?(${d}|${u})?>$`),O={meta:!0,img:!0,link:!0,input:!0,area:!0,br:!0,hr:!0},D={li:{li:!0},p:{p:!0,div:!0},td:{td:!0,th:!0},th:{td:!0,th:!0}},L={li:{ul:!0,ol:!0},a:{div:!0},b:{div:!0},i:{div:!0},p:{div:!0},td:{tr:!0,table:!0},th:{tr:!0,table:!0}};function N(e){return e[e.length-1]}class j{constructor(e,t,n,o,a){this.type=e,this.props=t,this.children=[],o&&(this.style=o),a&&(this.styleScoped=a),(n||"svg"===e)&&(this.isSVG=!0),void 0!==t.key&&(this.key=t.key)}appendChild(e){return e.props&&void 0!==e.props.key&&(this.hasKeys=!0),this.children.push(e),e}}function x(e){if(!e)return"";if(B[e])return B[e];const t=new j(null,{}),n=[t];let o,a,r=t,i=-1;for(;o=h.HTML_MARKUP.exec(e);){if(i>-1&&i+o[0].length<h.HTML_MARKUP.lastIndex){let t=e.substring(i,h.HTML_MARKUP.lastIndex-o[0].length).replace(h.MATCH_NLS,"");t&&("style"===r.type&&void 0!==r.props["data-is-webcomponent"]&&(t=t.replace(/:(component|wrapper|root)/g,":host")),!0===r.style?r.style=t:(" e-0_"===t.substr(0,5)&&(t=t.trim()),r.appendChild(t)))}if(i=h.HTML_MARKUP.lastIndex,"!"!==o[0][1]){if("</>"===o[0]){let e=N(n).type;e&&(o[0]=`</${e}>`,o[1]="/",o[2]=e)}if(!S.test(o[0])){if(o[3]&&o[3].startsWith("...")&&(o[3]=o[3].replace("...",'__spreadprops="')+'"'),"slot"===o[2]&&(o[2]=c),!o[1]&&o[0]){a={};for(let e;e=h.HTML_ATTRIBUTE.exec(o[3]);)a[e[2]]=e[5]||e[6]||"",U(o[0].substring(1,o[0].length-1),e[2],a[e[2]],a);if(!o[4]&&D[r.type]&&D[r.type][o[2]]&&(n.pop(),r=N(n)),"style"===o[2]&&void 0===a["data-is-webcomponent"]){r.style=!0,""===a["data-scoped"]&&(r.styleScoped=!0);continue}r=r.appendChild(new j(o[2],a,r.isSVG)),n.push(r)}if(o[1]||o[4]||O[o[2]])for(;;){if(r.type===o[2]){n.pop(),r=N(n);break}if(!L[r.type]||!L[r.type][o[2]])break;n.pop(),r=N(n)}}}}if(t.style&&"object"==typeof t.children[0]&&(t.children[0].style=t.style,t.children[0].styleScoped=t.styleScoped),t.children.length>1)t.type=p;else if(t.children.length)return B[e]=t.children[0],t.children[0];return B[e]=t,t}function U(e,t,n,o){"string"==typeof n&&h.IS_STRING_QUOTED.test(n)&&(n=n.replace(h.REPLACE_QUOT,"&quot;"));let a=w(t);o[h.IS_CUSTOM_TAG.test(e)&&!a?M(t):t]=t===m||n}let $=window.setTimeout.bind(window);window.requestAnimationFrame&&($=window.requestAnimationFrame.bind(window));var H=$;var W={encode:function(e){return"string"==typeof e?e.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&grave;"):e},decode:function(e){return"string"==typeof e?e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&grave;/g,"`"):e}};const V=function(){let e=[],t=[],n=[],o=null,a=function(r,p,i,l){let s=null==p,c=i||null,d=l||"",u=[],h=function(e,t){return e instanceof Array?""!==d?d:t:""!==d?d+"."+t:t},m=0,f=function(e){if(!0!==c.paused)if(s&&(p=++m>1,H((function(){m=0}))),!0===p)H((function(){if(e===u.length){for(let e=0;e<c.observers.length;e++)c.observers[e](u);u=[]}}));else{for(let e=0;e<c.observers.length;e++)c.observers[e](u);u=[]}},y={get:function(e,t){if("__getTarget"===t)return e;if("__isProxy"===t)return!0;if("__getParent"===t)return function(t){void 0===t&&(t=1);let n=h(e,"__getParent").split(".");return n.splice(-(t+1),t+1),function(e,t){return t.split(".").reduce((function(e,t){return e?e[t]:void 0}),e||self)}(c.parentProxy,n.join("."))};if("__getPath"===t){return h(e,"__getParent").slice(0,-12)}if("prototype"===t)return e[t];let n=e[t];if(e instanceof Date&&n instanceof Function)return n.bind(e);if(n instanceof Object&&e.hasOwnProperty(t)){!0===n.__isProxy&&(n=n.__getTarget);let e=-1,o=c.targets;for(let t=0,a=o.length;t<a;t++)if(n===o[t]){e=t;break}return e>-1?c.proxies[e]:a(n,p,c,""!==d?d+"."+t:t)}{let e=c.renderMode?W.encode(n):n,o=c.manipulate;return"function"==typeof o&&(e=o(e,t,!0)),e}},deleteProperty:function(e,a){let r=!0;o===_&&(r=!1,o=null);let p=Object.assign({},e),i=h(e,a);if(!c.paused){if(u.push({type:"delete",target:e,property:a,newValue:null,previousValue:p[a],currentPath:i,proxy:_}),"function"==typeof c.beforeChange&&c.checkBeforeChange!==i){if(c.checkBeforeChange=i,!1===c.beforeChange(u))return c.checkBeforeChange="",!0}c.checkBeforeChange=""}if(!0===r){let r,p;for(r=0,p=t.length;r<p&&e!==t[r];r++);let i=n[r]||[],l=i.length;for(;l--;)i[l].proxy!==_&&(o=i[l].proxy,delete i[l].proxy[a]);delete e[a]}return f(u.length),!0},set:function(e,a,r,p){let i=!0;o===_&&(i=!1,o=null);let l=e[a];if(l!==r||!1===i){let s=typeof l,d=h(e,a),m="update";"undefined"===s&&(m="add");let y=c.manipulate;if("function"==typeof y&&(r=y(r,d,!1)),!c.paused){if(u.push({type:m,target:e,property:a,newValue:r,previousValue:p[a],currentPath:d,proxy:_}),"function"==typeof c.beforeChange&&c.checkBeforeChange!==d){if(c.checkBeforeChange=d,!1===c.beforeChange(u))return c.checkBeforeChange="",!0}c.checkBeforeChange=""}if(!0===i){let p,i;for(p=0,i=t.length;p<i&&e!==t[p];p++);let l=n[p];if(l)for(let e=0,t=l.length;e<t;e++)l[e].proxy!==_&&(o=l[e].proxy,l[e].proxy[a]=r);e[a]=r,r instanceof Object&&null!==r&&function e(t){let n=t.__getTarget,o=Object.keys(n);for(let a=0,r=o.length;a<r;a++){let r=o[a];n[r]instanceof Object&&null!==n[r]&&e(t[r])}}(_[a])}f(u.length)}return!0}},_=new Proxy(r,y);null===c?(c={parentTarget:r,domDelay:p,parentProxy:_,observers:[],targets:[r],proxies:[_],path:d},e.push(c)):(c.targets.push(r),c.proxies.push(_));let g={target:r,proxy:_,observable:c},C=-1;for(let e=0,n=t.length;e<n;e++)if(r===t[e]){C=e;break}return C>-1?n[C].push(g):(t.push(r),n.push([g])),_};return{create:function(e,t,n,o){!0===e.__isProxy&&(e=e.__getTarget);let r=a(e,t);return"function"==typeof n&&this.observe(r,n),function e(t){let n=t.__getTarget,a=Object.keys(n);for(let r=0,p=a.length;r<p;r++){let p=a[r];"function"==typeof o&&o(n,p),n[p]instanceof Object&&null!==n[p]&&e(t[p])}}(r),r},observe:function(t,n){let o=e.length;for(;o--;)if(e[o].parentProxy===t){e[o].observers.push(n);break}},remove:function(o){let a=null,r=!1,p=e.length;for(;p--;)if(e[p].parentProxy===o){a=e[p],r=!0;break}let i=n.length;for(;i--;){let e=n[i].length;for(;e--;)n[i][e].observable===a&&(n[i].splice(e,1),0===n[i].length&&(t[i]=null))}!0===r&&e.splice(p,1)},manipulate:function(t,n){if("function"!=typeof n)throw new Error("callback is required");let o=e.length;for(;o--;)if(e[o].parentProxy===t){e[o].manipulate=n;break}},beforeChange:function(t,n){if("function"!=typeof n)throw new Error("callback is required");let o=e.length;for(;o--;)if(e[o].parentProxy===t){e[o].beforeChange=n;break}},beginRender:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].renderMode=!0;break}},endRender:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].renderMode=!1;break}},pause:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].paused=!0;break}},resume:function(t){let n=e.length;for(;n--;)if(e[n].parentProxy===t){e[n].paused=!1;break}}}}();const F={string:e=>"string"==typeof e?e:JSON.stringify(e),number:e=>"number"==typeof e?e:Number(e),boolean:e=>"boolean"==typeof e?e:"true"===e||1===e||"false"!==e&&0!==e&&!!e,object(e){if("object"==typeof e&&e)return e;try{return JSON.parse(e)}catch(t){return e}},array(e){return this.object(e)},date:e=>e instanceof Date?e:new Date(e)};function q(e,t,n,o,a){if("object"==typeof e.propsType){const o=e.propsType[n];void 0!==o&&(t=function(e,t){return void 0!==F[t]&&(e=F[t](e)),e}(t,o))}if(a&&(o=e.propsConvertOnFly),e.propsConvert&&e.propsConvertOnFly===o&&"object"==typeof e.propsConvert){const o=e.propsConvert[n],a=e[o]||o;if("function"==typeof a)return a.call(e,t)}if(a&&(o=e.propsComputedOnFly),e.propsComputed&&e.propsComputedOnFly===o&&"object"==typeof e.propsComputed){let o=e._computedCache.get(n);if(void 0===o)o=new Map,e._computedCache.set(n,o);else{const e=o.get(t);if(void 0!==e)return e}const a=e.propsComputed[n],r=e[a]||a;if("function"==typeof r){const n=r.call(e,t);return o.set(t,n),n}}return t}function K(e,t){z.callUpdate(e,t),function(e,t){if("object"==typeof e.propsListener)for(let n=0;n<t.length;n++){const o=t[n],a=e.propsListener[o.currentPath];if("update"===o.type&&a){const t=e[a]||a;"function"==typeof t&&t.call(e,o.newValue,o.previousValue)}}if("object"==typeof e.propsListenerAsync)for(let n=0;n<t.length;n++){const o=t[n],a=e.propsListenerAsync[o.currentPath];if("update"===o.type&&a){const t=e[a]||a;"function"==typeof t&&function(n){H((()=>t.call(e,n.newValue,n.previousValue)))}(o)}}}(e,t),e.render(void 0,t)}var G={create:function(e){let t=!1;e._props&&e._props.__isProxy&&(V.remove(e._props),t=!0),e._props=V.create(e._rawProps,!0,(t=>{e._isRendered&&(e.delayUpdate?setTimeout((()=>{K(e,t)}),e.delayUpdate):K(e,t))}),((t,n)=>{t[n]=q(e,t[n],n)})),V.manipulate(e._props,((t,n,o)=>q(e,t,n,o))),V.beforeChange(e._props,(t=>{if(!1===z.callBeforeUpdate(e,t))return!1})),t&&e._isRendered&&e.render()}},Y=function(e){e&&!e._dozAttach&&(e._dozAttach={})},Q=["async","autocomplete","autofocus","autoplay","border","challenge","checked","compact","contenteditable","controls","default","defer","disabled","formNoValidate","frameborder","hidden","indeterminate","ismap","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","readonly","required","reversed","scoped","scrolling","seamless","selected","sortable","spellcheck","translate"];function Z(e){return"string"==typeof(t=e)&&"o"===t[0]&&"n"===t[1];var t}function X(e,t,n,o,a,r){if("data-attributeoriginaletagname"===t)return;if(Y(e),e._dozAttach.props||(e._dozAttach.props={}),e._dozAttach.props[t]=n,"key"===t)return void(void 0===e._dozAttach.key&&(e._dozAttach.key=n));let p=w(t);p&&(e._dozAttach.hasDirective=!0),(-1===e.tagName.indexOf("-")||o.exposeAttributes.includes(t)||t.startsWith("data-"))&&(!function(e){return Z(e)||e===m}(t)&&"function"!=typeof n&&"object"!=typeof n||p)&&(void 0===n&&(n=""),"class"!==t||r?void 0===e[t]||r?(t.startsWith("data-")||t.startsWith("aria-")||"role"===t||"for"===t||r||o&&o.app&&o.app.setAllAttributes||window.SSR&&!t.startsWith("d-"))&&e.setAttribute(t,n):(""===n&&Q.indexOf(t)>-1&&(n=!0),e[t]=n):e.className=n)}function J(e,t,n,o,a,r,p){X(e,t,n,a,0,p),a.$$afterAttributeUpdate(e,t,n)}function ee(e,t,n={},o,a,r){const p=Object.assign({},t,n);let i,l=[],s=Object.keys(p);for(let a=0;a<s.length;a++)if(i=s[a],e&&1===e.nodeType&&t[i]!==n[i]){J(e,i,t[i],n[i],o,0,r);let a={};a[i]=t[i],l.push(a)}return l}function te(e){return e.slice(2).toLowerCase()}function ne(e,t,n,o,a){if(!Z(t))return;let r=!1;"function"==typeof n&&(r=!0),"function"==typeof n&&(r?e.addEventListener(te(t),n.bind(o)):e.addEventListener(te(t),n))}function oe(e){return/&\w+;/.test(e)?a.decode(e):e}function ae(e,t,n){if("string"!=typeof e)return;let o=t.replace(/[^\w]/g,"");return/:root/.test(e)&&console.warn("[DEPRECATION] the :root pseudo selector is deprecated, use :component or :wrapper instead"),e=(e=e.replace(/{/g,"{\n").replace(/}/g,"}\n").replace(/^(\s+)?:(component|wrapper|root)(\s+)?{/gm,t+" {").replace(/:(component|wrapper|root)/g,"").replace(/(@(?:[\w-]+-)?keyframes\s+)([\w-_]+)/g,`$1 ${o}-$2`).replace(/((?:[\w-]+-)?animation(?:-name)?(?:\s+)?:(?:\s+))([\w-_]+)/g,`$1 ${o}-$2`).replace(/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm,"").replace(/[^\s].*{/gm,(e=>{if(/^(@|:host|(from|to|\d+%)[^-_])/.test(e))return e;let n=e.split(",");const o=new RegExp(`^${t.replace(/[[\]]/g,"\\$&")}(\\s+)?{`);for(let e=0;e<n.length;e++)n[e]=n[e].trim(),o.test(n[e])||(/^:global/.test(n[e])?n[e]=n[e].replace(":global",""):n[e]=`${t} ${n[e]}`);return e=n.join(",")}))).replace(/\s{2,}/g," ").replace(/{ /g,"{").replace(/ }/g,"}").replace(/\s:/g,":").replace(/\n/g,"").trim()}var re=["a","abbr","address","area","article","aside","audio","b","bdi","bdo","blockquote","br","button","canvas","caption","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","i","iframe","img","input","ins","kbd","keygen","label","legend","li","main","map","mark","menu","meter","nav","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video","wbr"];function pe(e,t,n,o,a){if("string"==typeof e)return function(e,t,n,o,a){let r;const p=`${t}--style`,l=`${t}--style-reset`;let s;if(s=a&&a.app.useShadowRoot?a.app._root.getElementById(p):document.getElementById(p),s)r=s.innerHTML=e;else{if(o){let e=`${n}, ${n} *,`;e+=re.map((e=>`${n} ${e}`)).join(","),e+=" {all: initial}";const t=document.createElement("style");if(t.id=l,t.innerHTML=e,a&&a.app.useShadowRoot){let e=a.app._root.querySelector(i);a.app._root.insertBefore(t,e)}else document.head.appendChild(t)}const t=document.createElement("style");if(t.id=p,r=t.innerHTML=e,a&&a.app.useShadowRoot){let e=a.app._root.querySelector(i);a.app._root.insertBefore(t,e)}else document.head.appendChild(t)}return r}(e=ae(e,n),t,n,o,a)}const ie=Object.create(null),le=[];function se(e,t,n,o){if(void 0===e||Array.isArray(e)&&0===e.length)return;let a,p;if("object"!=typeof e)return document.createTextNode(oe(e));if(e&&null!=e.type&&"#"!==e.type[0]||(e={type:l,props:{},children:[]}),e.props&&e.props.slot&&!e.isNewSlotEl)return document.createComment(`slot(${e.props.slot})`);if(a=ie[e.type],a?p=a.cloneNode():(p=e.isSVG?document.createElementNS(r,e.type):document.createElement(e.type),ie[e.type]=p.cloneNode(!0)),function(e,t,n,o,a){let r;const p=Object.keys(t);for(let o=0,i=p.length;o<i;o++)r=p[o],ne(e,r,t[r],n),X(e,r,t[r],n,0,a),n&&n.app&&n.app.emit&&n.app.emit("elementAttributesAttach",e,r,t[r],n)}(p,e.props,t,0,e.isSVG),!e.hasKeys)if(e.children.length){if(1===e.children.length&&"string"==typeof e.children[0])p.textContent=oe(e.children[0]);else if(void 0===e.props.suspendcontent)for(let a=0;a<e.children.length;a++){let r=se(e.children[a],t,n,o);r&&p.appendChild(r)}}else;return Y(p),p._dozAttach.elementChildren=e.children,p._dozAttach.originalTagName=e.props["data-attributeoriginaletagname"],t.$$afterNodeElementCreate(p,e,n,t),e.style&&ce(e,t),p}function ce(e,t){t.__hasStyle=!0;let n=e.styleScoped;const o=t.uId;let a=`[data-uid="${o}"]`;pe(e.style,o,a,n,t)}function de(e,t,n,o=0,a,r,p){if(e&&(t!==n||a.tag===s)){if(a&&a.app&&a.app.onVdomUpdateElement){let o=a.app.onVdomUpdateElement(e,t,n,a,r,p);o&&(e=o.$parent||e,t=o.newNode||t,n=o.oldNode||n,a=o.cmp||a)}if(t&&t.cmp&&(a=t.cmp),t&&n&&t.style!==n.style&&ce(t,a),p&&e._dozAttach.componentInstance){let o=z.callDrawByParent(e._dozAttach.componentInstance,t,n);null!=o&&"object"==typeof o&&(t=o.newNode||t,n=o.oldNode||n);let i=!(!t||!t.props)&&t.props.slot;if(e._dozAttach.componentInstance._defaultSlot&&!i&&(i="__default__"),"object"==typeof t&&i&&e._dozAttach.componentInstance._slots[i])return void e._dozAttach.componentInstance._slots[i].forEach((o=>{if(o.parentNode){t.isNewSlotEl=!0;let n=se(t,a,r,e._dozAttach.componentInstance||p);n.removeAttribute("slot"),o.parentNode.replaceChild(n,o),o.__newSlotEl=n}else{let i=Array.from(o.__newSlotEl.parentNode.children).indexOf(o.__newSlotEl);de(o.__newSlotEl.parentNode,t,n,i,a,r,e._dozAttach.componentInstance||p)}}))}if(t&&t.props&&t.props["data-follow"]){let n=document.querySelector(`[data-follow="${t.props["data-follow"]}"]`);n&&n.parentElement&&(e=n.parentElement,Y(e))}if(!n){let n;if(e.childNodes.length){let o=e.childNodes[e.childNodes.length-1];if(Y(o),o._dozAttach.componentRootInstance)return n=se(t,a,r,e._dozAttach.componentInstance||p),e.insertBefore(n,o),n}return Y(e),n=se(t,a,r,e._dozAttach.componentInstance||p),e.appendChild(n),n}if(t){if(typeof(i=t)!=typeof(l=n)||"string"==typeof i&&i!==l||i.type!==l.type||i.props&&i.props.forceupdate){const i=e.childNodes[o];if(!i)return;const l=a.$$beforeNodeChange(e,i,t,n);if(l)return l;const s=se(t,a,r,e._dozAttach.componentInstance||p);return e.replaceChild(s,i),a.$$afterNodeChange(s,i),i._dozAttach&&i._dozAttach.componentInstance&&(i._dozAttach.componentInstance.unmount(),i._dozAttach.componentInstance.destroy()),s}if(void 0!==t.hasKeys||void 0!==n.hasKeys){let i=e.childNodes[o],l=t.children.map((e=>e.key)),s=n.children.map((e=>e.key));void 0===i._dozAttach.keyList&&(i._dozAttach.keyList=new Map);let c=s.filter((e=>!l.includes(e)));for(let e=0;e<c.length;e++)if(i._dozAttach.keyList.has(c[e])){let t=i._dozAttach.keyList.get(c[e]);t._dozAttach.componentInstance?t._dozAttach.componentInstance.destroy():i.removeChild(t),i._dozAttach.keyList.delete(c[e]),a.app.cacheStores.kCache.delete(c[e])}c.length&&(s=s.filter((e=>!~c.indexOf(e))));let d=[],u=[],h=Object.create(null);for(let n=0;n<l.length;n++){l[n]!==s[n]&&(u.push(n),h[n]=!0);let o=l[n],c=i._dozAttach.keyList.get(o);if(c){let t=a.app.cacheStores.kCache.get(o),n=t.next,i=t.prev;n.children||(n.children=[]),i.children||(i.children=[]),d.push(c),t.isChanged&&ee(c,n.props,i.props,a,e._dozAttach.componentInstance,n.isSVG);const l=n.children.length,s=i.children.length;for(let t=0;t<l||t<s;t++)void 0!==n.children[t]&&void 0!==i.children[t]&&de(c,n.children[t],i.children[t],t,a,r,e._dozAttach.componentInstance||p)}else{let l=se(t.children[n],a,r,e._dozAttach.componentInstance||p);i._dozAttach.keyList.set(o,l),d.push(l)}}if(void 0===u[0])return;if(i.childNodes.length===u[0]){for(let e=0;e<d.length;e++)i.appendChild(d[e]);return}let m,f,y=!0,_=0,g=d.length-1;for(;_<=g;)y?(m=i.childNodes[_],f=d[_],h[_]&&Array.prototype.indexOf.call(i.childNodes,f)!==_&&(i.insertBefore(f,m),y=!1),_++):(m=i.childNodes[g],f=d[g],h[g]&&Array.prototype.indexOf.call(i.childNodes,f)!==g&&(m?i.insertBefore(f,m.nextSibling):(i.appendChild(f),g++),y=!0),g--)}else if(t.type){if(e._dozAttach.componentInstance===a&&e.childNodes.length){let t=e.childNodes.length-1;e.childNodes[t]._dozAttach&&e.childNodes[t]._dozAttach.componentRootInstance&&(o+=t)}let i=ee(e.childNodes[o],t.props,n.props,a,e._dozAttach.componentInstance,t.isSVG);if(a.$$beforeNodeWalk(e,o,i))return;const l=t.children.length,s=n.children.length;for(let i=0;i<l||i<s;i++)de(e.childNodes[o],t.children[i],n.children[i],i,a,r,e._dozAttach.componentInstance||p);!function(){let e=le.length;for(;e--;)le[e].parentNode.removeChild(le[e]),le[e]._dozAttach&&le[e]._dozAttach.componentInstance&&(le[e]._dozAttach.componentInstance.unmount(),le[e]._dozAttach.componentInstance.destroy()),le.splice(e,1)}()}}else e.childNodes[o]&&le.push(e.childNodes[o]);var i,l}}const ue=de;function he(e){return e.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}var me={add:function(e){let t=e.__proto__;"function"==typeof e.onAppReady?(e.onAppReady._instance=e,e.app._onAppReadyCB.push(e.onAppReady)):t&&t.constructor&&t.constructor.__postListeners&&t.constructor.__postListeners.onAppReady&&(t.constructor.__postListeners.onAppReady._instance=e,e.app._onAppReadyCB.push(t.constructor.__postListeners.onAppReady))}};var fe={add:function(e){"function"==typeof e.onAppDraw&&(e.onAppDraw._instance=e,e.app._onAppDrawCB.push(e.onAppDraw))},emit:function(e,t,n){e.app._onAppDrawCB.forEach((o=>{"function"==typeof o&&o._instance&&o.call(o._instance,t,n,e)}))}};function ye(e){if("object"!=typeof e||null===e)return e;let t,n;if(Array.isArray(e)){let o;for(t=[],n=0,o=e.length;n<o;n++)t[n]=ye(e[n]);return t}for(n in t={},e)e.hasOwnProperty(n)&&(t[n]=ye(e[n]));return t}const _e=d,ge=/e-0_(\d+)_0-e/g,Ce=/e-0_(\d+)_0-e/;function Ae(e,t){if("string"!=typeof e)return e;if("e"===e[0]&&"-"===e[1]){let n=Ce.exec(e);return n?"0"===n[1][0]&&n[1].length>=2?t[n[1].substring(1)]+"":t[n[1]]:e}return e.replace(ge,((e,n)=>n?t[n]:e))}function be(e,t,n,o){let a=Object.keys(e);if(e.__spreadprops){for(let n in t[0])e[n]=t[0][n];delete e.__spreadprops}for(let r=0;r<a.length;r++)if(e[a[r]]&&"object"==typeof e[a[r]])be(e[a[r]],t,e,o);else{let i=Ae(e[a[r]],t);if("type"===a[r]&&"string"!=typeof i){let t=i||{},n=he(t.tag||t.name||p);n=n.replace(/_+/,""),-1===n.indexOf("-")&&(n=`${n}-${n}`);let a=n+"-"+o.uId+"-"+o._localComponentLastId++;o._componentsMap.has(i)?a=o._componentsMap.get(i):o._componentsMap.set(i,a),void 0===o._components[a]&&(o._components[a]={tag:n,cfg:t}),void 0===o.app._components[a]&&(o.app._components[a]={tag:n,cfg:t}),i=n,e.props["data-attributeoriginaletagname"]=a}Array.isArray(i)&&"0"===a[r]?(n.children=i,i[0]&&void 0!==i[0].key&&(n.hasKeys=!0)):(""===i&&"0"===a[r]&&(i=" "),e[a[r]]=i)}}var we=function(e,...t){let n,o,a;this&&this.app?(n=this.app.cacheStores.hCache,o=this.app.cacheStores.kCache,a=this.app.isWebComponent&&this._mainComponentByAppCreate):(n=R.hCache,o=R.kCache);let r,p=n.get(e);if(!p){p=e[0];let o=!1,r=!1,i=!1,l=t.length;for(let n=0;n<l;++n){let l=e[n],s=l.length,c=l[s-1];for(let e=0;e<s;e++)"<"===l[e]?o=!1:">"===l[e]&&(o=!0);l.indexOf("<style")>-1&&(r=!0,i=!0),l.indexOf("</style")>-1&&(r=!1),i&&a&&(p=p.replace(/<style>/,"<style data-is-webcomponent>")),r&&(o=!1,p=p.replace(/ scoped>/," data-scoped>")),o?"object"==typeof t[n]||"function"==typeof t[n]?p+=`e-0_${n}_0-e${e[n+1]}`:(""===t[n]&&(t[n]=" "),/<.*>/.test(t[n])?p+=`${t[n]}${e[n+1]}`:p+=`<${_e}>e-0_0${n}_0-e</${_e}>${e[n+1]}`):p+="/"===c?e[n+1]:`e-0_${n}_0-e${e[n+1]}`}p=p.trim(),n.set(e,p)}let i,l=x(p);if(l.props.forceupdate&&n.delete(e),void 0===l.key&&void 0===l.props["item-list"]||(i=function(e){let t="";for(let n=0;n<e.length;n++)"function"!=typeof e[n]&&"object"!=typeof e[n]&&(t+=e[n]);return t}(t),r=i?n.get(i):void 0),r||(r=ye(l),be(r,t,null,this),i&&n.set(i,r)),void 0!==l.key){let e=o.get(r.key);e?o.set(r.key,{isChanged:i!==e.clonedKey,clonedKey:i,next:r,prev:e.next}):o.set(r.key,{isChanged:!0,clonedKey:i,next:r,prev:{}})}return r};function ve(e){Array.isArray(e.components)?(e.components.forEach((t=>{"object"==typeof t&&"string"==typeof t.tag&&"object"==typeof t.cfg&&(e._components[t.tag]=t)})),delete e.components):"object"==typeof e.components&&(Object.keys(e.components).forEach((t=>{e._components[t]={tag:t,cfg:e.components[t]}})),delete e.components)}function Ee(e,t=[]){if("object"!=typeof e||null==e)throw new TypeError("expected an object");Array.isArray(t)||(t=[t]);for(let n=t.length-1;n>=0;--n){let o=Object.keys(t[n]);for(let a=o.length-1;a>=0;--a){let r=o[a];void 0===e[r]?e[r]=t[n][r]:console.warn("Doz",`mixin failed for already defined property: ${r}`)}}return e}function Pe(e){Ee(e,e.mixin),e.mixin=[]}function Ie(e,t){let n=Object.keys(t);for(let o=0,a=n.length;o<a;o++){let a=n[o];t[a]instanceof Object&&null!==t[a]?Ie(e,t[a]):t[a]=q(e,t[a],a,!1,!0)}}function ze(e){Ie(e,e._rawProps)}function Me(e,t){let n=e.app.createInstance({root:null,template:t,app:e.app,parent:e});n&&n._rootElement&&(n._rootElement.parentNode._dozAttach.componentDynamicInstance=n)}class ke{constructor(e={}){var t,n,o;e.cmp=e.cmp||{tag:e.tag,cfg:{}},e.app=e.app||{},this._opt=e,this._cfgRoot=e.root,this._publicProps=e.props,this._isRendered=!1,this._prev=null,this._rootElement=null,this._parentElement=null,this._components={},this._processing=[],this._dynamicChildren=[],this._unmounted=!1,this._unmountedParentNode=null,this._configured=!1,this._props={},this._directiveProps=null,this._computedCache=new Map,this._renderPause=!1,this._hasSlots=!1,this._slots={},this._defaultSlot=null,this._localComponentLastId=0,this._componentsMap=new Map,this.tag=e.cmp.tag,this.app=e.app,this.exposeAttributes=["style","class"],this.parent=e.parentCmp,this.appRoot=e.app._root,this.action=e.app.action,this.shared=e.app.shared,this._childrenInc=0,this.children={},this.childrenByTag={},this.rawChildren=[],this.rawChildrenVnode=[],this.updateChildrenProps=!0,this.mixin=[],this.propsConvertOnFly=!1,this.propsComputedOnFly=!1,this.delayUpdate=0,this.lockRemoveInstanceByCallback=null,this.waitMount=!1,this._isSubclass=this.__proto__.constructor!==ke,this.uId=this.app.generateUId(),this.h=we.bind(this),this._initRawProps(e),t=this,n=e.cmp.cfg,Object.assign(t,n,o),Pe(this),ve(this);!1!==z.callBeforeCreate(this)?(G.create(this,!0),me.add(this),fe.add(this),z.callCreate(this)):this.__beforeCreateReturnsFalse=!0}set props(e){"function"==typeof e&&(e=e()),this._rawProps=Object.assign({},e,this._opt?this._opt.props:{}),G.create(this),I.callAppComponentSetProps(this),this.app.emit("componentSetProps",this)}get props(){return this._props}loadProps(e){if("object"!=typeof e)throw new TypeError("Props must be an object");this._rawProps=Object.assign({},e),ze(this),G.create(this),z.callLoadProps(this)}set config(e){if(!this._isSubclass)throw new Error("Config is allowed only for classes");if(this._configured)throw new Error("Already configured");if("object"!=typeof e)throw new TypeError("Config must be an object");I.callAppComponentSetConfig(this,e),"object"==typeof e.mixin&&(this.mixin=e.mixin,Pe(this)),"object"==typeof e.components&&(this.components=e.components,ve(this)),"boolean"==typeof e.updateChildrenProps&&(this.updateChildrenProps=e.updateChildrenProps),this._configured=!0,z.callConfigCreate(this)}getHTMLElement(){return this._parentElement}beginSafeRender(){V.beginRender(this.props)}endSafeRender(){V.endRender(this.props)}each(e,t,n=!1){let o;return Array.isArray(e)&&(n&&this.beginSafeRender(),o=e.map(t),n&&this.endSafeRender()),o}toStyle(e,t=!0){return function(e,t=!0){return e=Object.entries(e).reduce(((e,[t,n])=>`${e}${he(t)}:${n};`),""),t?`style="${e}"`:e}(e,t)}render(e){if(this._renderPause)return;this.beginSafeRender();let t=this.template(this.h);this.endSafeRender();let n=t&&"object"==typeof t?t:x(t);this.app.emit("draw",n,this._prev,this),fe.emit(this,n,this._prev);const o=ue(this._cfgRoot,n,this._prev,0,this,e);!this._rootElement&&o&&(this._rootElement=o,Y(this._rootElement),this._parentElement=o.parentNode,this.__hasStyle&&(this._parentElement.dataset?this._parentElement.dataset.uid=this.uId:this._parentElement.firstElementChild.nextElementSibling.dataset.uid=this.uId)),this._prev=n}renderPause(){this._renderPause=!0}renderResume(e=!0){this._renderPause=!1,e&&this.render()}prepareCommit(){V.pause(this.props),this.renderPause()}commit(){this.renderResume(),V.resume(this.props)}get isRenderPause(){return this._renderPause}mount(e,t={}){if(this._unmounted)return!1===z.callBeforeMount(this)||(this._unmountedPlaceholder.parentNode.replaceChild(this._unmountedParentNode,this._unmountedPlaceholder),this._unmounted=!1,this._unmountedParentNode=null,this._unmountedPlaceholder=null,z.callMount(this),Object.keys(this.children).forEach((e=>{this.children[e].mount()}))),this;if(e){let n=this._rootElement;return"string"==typeof t.selector?n=n.querySelector(t.selector):t.selector instanceof HTMLElement?n=t.selector:1!==this._rootElement.nodeType&&(n=this.getHTMLElement()),this._unmounted=!1,this._unmountedParentNode=null,this._unmountedPlaceholder=null,this.app.mount(e,n,this)}}unmount(e=!1,t,n){if(this.lockRemoveInstanceByCallback&&"function"==typeof this.lockRemoveInstanceByCallback)this.lockRemoveInstanceByCallback(this.unmount,e,t,n);else if(e||!Boolean(this._unmountedParentNode)&&this._rootElement&&this._rootElement.parentNode&&this._rootElement.parentNode.parentNode)return!1!==z.callBeforeUnmount(this)&&(this._unmountedParentNode=this._rootElement.parentNode,this._unmountedPlaceholder=document.createComment(Date.now().toString()),e?this._rootElement.parentNode&&this._rootElement.parentNode.parentNode.removeChild(this._rootElement.parentNode):this._rootElement.parentNode.parentNode.replaceChild(this._unmountedPlaceholder,this._unmountedParentNode),this._unmounted=!t,n||z.callUnmount(this),Object.keys(this.children).forEach((o=>{this.children[o].unmount(e,t,n)})),this)}destroy(e){if(this.lockRemoveInstanceByCallback&&"function"==typeof this.lockRemoveInstanceByCallback)this.lockRemoveInstanceByCallback(this.destroy,e);else if(!1!==this.unmount(e,!0)&&(e||this._rootElement&&!1!==z.callBeforeDestroy(this))){if(Object.keys(this.children).forEach((e=>{this.children[e].destroy()})),z.callDestroy(this),this.parent&&this.parent.children){for(let e in this.parent.children)this.parent.children.hasOwnProperty(e)&&this===this.parent.children[e]&&delete this.parent.children[e];if(this.parent.childrenByTag[this.tag]){let e=this.parent.childrenByTag[this.tag].indexOf(this);-1!==e&&this.parent.childrenByTag[this.tag].splice(e,1)}}return!0}}template(){return""}_initRawProps(e){this._isSubclass?this._rawProps=Object.assign({},e.props):this._rawProps=Object.assign({},"function"==typeof e.cmp.cfg.props?e.cmp.cfg.props():e.cmp.cfg.props,e.props),this._initialProps=ye(this._rawProps)}getDozWebComponentById(e){return this.getWebComponentById(e)}getDozWebComponentByTag(e){return this.getWebComponentByTag(e)}getWebComponentById(e){return f.webComponents.ids[e]||null}getWebComponentByTag(e){return f.webComponents.tags[e]||null}_setProps(e){for(let t in e)e.hasOwnProperty(t)&&(this.props[t]=e[t])}setProps(e){this.prepareCommit(),this._setProps(e),this.commit()}setPropsAsync(e){H((()=>this._setProps(e)))}$$afterNodeElementCreate(e,t,n){if(e._dozAttach.hasDirective&&(I.callAppDOMElementCreate(this,e,t,n),I.callComponentDOMElementCreate(this,e,n)),"function"==typeof e.hasAttribute&&(-1!==t.type.indexOf("-")&&Me(this,e),t.type===c)){let t=e._dozAttach.props?e._dozAttach.props.name:null;t||(this._defaultSlot=e,t="__default__"),void 0===this._slots[t]?this._slots[t]=[e]:this._slots[t].push(e),this._hasSlots=!0}}$$beforeNodeChange(e,t,n,o){if("string"==typeof n&&"string"==typeof o&&t)return"SCRIPT"===e.nodeName?"text/style"===e.type&&e._dozAttach.styleData.id&&e._dozAttach.styleData.owner&&document.getElementById(e._dozAttach.styleData.id)&&(document.getElementById(e._dozAttach.styleData.id).textContent=ae(n,e._dozAttach.styleData.ownerByData)):t.textContent=oe(n),t}$$afterNodeChange(e,t){Y(t),Y(e),t._dozAttach.componentRootInstance&&(e._dozAttach.componentRootInstance=t._dozAttach.componentRootInstance,e._dozAttach.componentRootInstance._rootElement=e,e._dozAttach.componentRootInstance._rootElement.parentNode.dataset.uid=t._dozAttach.componentRootInstance.uId)}$$beforeNodeWalk(e,t,n){if(e.childNodes[t]){Y(e.childNodes[t]);const o=e.childNodes[t]._dozAttach.componentDynamicInstance;if(o&&n.length)return n.forEach((e=>{Object.keys(e).forEach((t=>{o.props[t]=e[t]}))})),!0}return!1}$$afterAttributeUpdate(e,t,n){let o=w(t);if(this.updateChildrenProps&&e){t=o?t:M(t);const a=e.firstChild;Y(a),a&&a._dozAttach.componentRootInstance&&Object.prototype.hasOwnProperty.call(a._dozAttach.componentRootInstance._publicProps,t)?a._dozAttach.componentRootInstance.props[t]=n:e._dozAttach.componentInstance&&(e._dozAttach.componentInstance.props[t]=n)}I.callComponentDOMElementUpdate(this,e),e&&o&&e.removeAttribute(t)}}const Be=[];function Te(e,t){if(e.cmp){let n=e.cmp._childrenInc++;I.callAppComponentAssignIndex(t,n,(n=>{e.cmp.children[n]=t})),void 0===e.cmp.childrenByTag[t.tag]?e.cmp.childrenByTag[t.tag]=[t]:e.cmp.childrenByTag[t.tag].push(t)}}function Re(){Be.forEach((e=>e.remove()))}function Se(e=null,t,n){if(!e._isRendered){if(e._isRendered=!0,e.render(!0),e._rootElement._dozAttach.componentRootInstance=e,e.getHTMLElement()._dozAttach.componentInstance=e,e._defaultSlot&&e.getHTMLElement().firstElementChild){let t=document.createComment("slot");e.getHTMLElement().replaceChild(t,e.getHTMLElement().firstElementChild)}e._hasSlots&&n&&H((()=>n.render(!1,[],!0))),z.callMount(e),e.waitMount&&(e.appReadyExcluded||t.app._onAppComponentsMounted.delete(e))}}function Oe(e,t={},n){Y(e);let o=function(e){return e._dozAttach.originalTagName||e.nodeName.toLowerCase()}(e);I.callAppComponentAssignName(t,e,(e=>{o=e}));let a={};t.cmp&&t.cmp._components&&(a=t.cmp._components);const r=n.autoCmp||a[o]||n.app._components[o]||C.getComponent(o);if(r){if(t.cmp&&t.cmp.mounted)return;const a=function(e){const t={};if(e._dozAttach.props){let n=Object.keys(e._dozAttach.props);for(let o=0;o<n.length;o++)U(e.nodeName,n[o],e._dozAttach.props[n[o]],t)}else if(e.attributes){const n=Array.from(e.attributes);for(let o=n.length-1;o>=0;--o){let a=n[o];U(e.nodeName,a.name,a.nodeValue,t)}}return t}(e),p={},i=t.cmp||n.parent;let l;if("function"==typeof r.cfg){if(!(r.cfg.prototype instanceof ke)){const e=r.cfg;r.cfg=class extends ke{},r.cfg.prototype.template=e}l=new r.cfg({tag:r.tag||o,root:e,app:n.app,props:a,componentDirectives:p,parentCmp:i})}else if(r.cfg.then){let s=null,c=null;e.parentElement&&e.parentElement._dozAttach&&e.parentElement._dozAttach.props&&(e.parentElement._dozAttach.props["d-async-loading"]&&(s=e.parentElement._dozAttach.props["d-async-loading"]),e.parentElement._dozAttach.props["d-async-error"]&&(c=e.parentElement._dozAttach.props["d-async-error"])),((e,s,c)=>{let d=null;if(s){let t={},o={};"object"==typeof s&&s.component&&(t=s.props||t,o=s.directives||o,s=s.component),l=new s({tag:s.tag||"loading-component",root:e,app:n.app,props:t,componentDirectives:o,parentCmp:i}),d=l}r.cfg.then((s=>{if("object"==typeof s){let e=Object.keys(s);s=s[e[e.length-1]]}if(s.tag){let t=document.createElement(s.tag);e.replaceWith(t),e=t}l=new s({tag:r.tag||o,root:e,app:n.app,props:a,componentDirectives:p,parentCmp:i}),ze(l),l.app.emit("componentPropsInit",l),d&&d.destroy(),Se(l,n,i),Te(t,l)})).catch((t=>{if(c){let t={},o={};"object"==typeof c&&c.component&&(t=c.props||t,o=c.directives||o,c=c.component),l=new c({tag:c.tag||"error-component",root:e,app:n.app,props:t,componentDirectives:o,parentCmp:i})}console.error(t)}))})(e,s,c)}else l=new ke({tag:r.tag||o,cmp:r,root:e,app:n.app,props:a,componentDirectives:p,parentCmp:i});if(l&&l.__beforeCreateReturnsFalse&&(l=void 0),!l)return;return l.rawChildrenObject=e._dozAttach.elementChildren,l.$domEl=e,"object"==typeof l.module&&function(e,t){if(!t||!t.hot)return;const n="__doz_hmr_props_store__",o="__doz_hmr_init_props_store__";window[n]=window[n]||{},window[o]=window[o]||{};const a=t.id;window[n][a]=window[n][a]||new Map,window[o][a]=window[o][a]||new Map,Object.keys(e.props).forEach((t=>{e._initialProps[t]===window[o][a].get(t)?e.props[t]=window[n][a].get(t)||e.props[t]:e.props[t]=e._initialProps[t]})),t.hot.dispose((()=>{Object.keys(e.props).forEach((t=>{window[n][a].set(t,e.props[t]),window[o][a].set(t,e._initialProps[t])}))}))}(l,l.module),ze(l),l.app.emit("componentPropsInit",l),l.waitMount?(l.appReadyExcluded||n.app._onAppComponentsMounted.set(l,!1),l.runMount=Se.bind(this,l,n,i),z.callWaitMount(l)):!1!==z.callBeforeMount(l)?Se(l,n,i):l.runMount=Se.bind(this,l,n,i),Te(t,l),n.autoCmp=null,l}}function De(e={}){if(e.root&&(e.mountMainComponent||e.template instanceof HTMLElement||"string"==typeof e.template&&(e.template=a.create(e.template),e.root.appendChild(e.template))),e.mountMainComponent){let t=new e.component({cmp:e.component,root:e.root,app:e.app,props:e.props||{},componentDirectives:{},parentCmp:null});if(ze(t),t.app.emit("componentPropsInit",t),t._isRendered=!0,t._mainComponentByAppCreate=!0,t.render(!0),e.innerHTML){a.create(e.innerHTML,"div").childNodes.forEach((e=>{t.getHTMLElement().appendChild(e)}))}return Oe(t.getHTMLElement(),{cmp:t},e),Re(),z.callMount(t),t}{let t=Oe(e.template,{cmp:e.parent},e);return Re(),t}}function Le(e,t={}){if("function"!=typeof e)throw new TypeError("Plugin must be a function");e.options=t,_(e)}Le((function(e,t){function n(e,t){return e._propsPropagationIsArray&&-1===e.propsPropagation.indexOf(t)||"d"===(n=t)[0]&&(":"===n[1]||"-"===n[1]);var n}function o(e,t){let o=e._propsPropagationMainParent;t?t.forEach((t=>{n(o,t.currentPath)||(e.props[t.currentPath]=t.newValue)})):Object.keys(o.props).forEach((t=>{n(o,t)||(e.props[t]=o.props[t])}))}function a(e,t){e._propsPropagationChildren.forEach((e=>{o(e,t)}))}t.on("componentSetProps",(e=>{e.propsPropagation&&a(e)})),t.on("componentPropsInit",(e=>{var t;e.propsPropagation&&Object.defineProperties(e,{_propsPropagationIsArray:{value:Array.isArray(e.propsPropagation)},_propsPropagationIsMainParent:{value:!0},_propsPropagationMainParent:{value:e,writable:!0},_propsPropagationChildren:{value:[]}}),e.parent&&e.parent.propsPropagation&&(e.excludeFromPropsPropagation||void 0!==e.props["d:no-propagation"]?Object.defineProperty(e,"excludeFromPropsPropagation",{value:!0}):(e.propsPropagation=e.parent.propsPropagation,e._propsPropagationMainParent=e.parent._propsPropagationMainParent,(t=e)._propsPropagationMainParent._propsPropagationChildren.push(t),o(e)))})),t.on("componentUpdate",((e,t)=>{e._propsPropagationIsMainParent&&a(e,t)})),t.on("componentDestroy",(e=>{e._propsPropagationMainParent&&function(e){let t=e._propsPropagationMainParent._propsPropagationChildren;for(let n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)}(e)}))})),Le((function(e,t){t.on("componentPropsInit",(e=>{let t=window.DOZ_STORES;t&&e.store&&t[e.store]&&(e.props=t[e.store])}))}));var Ne={use:Le,load:function(e){f.plugins.forEach((t=>{t(e.constructor,e,t.options)}))}};let je=0;class xe{constructor(t={}){if(this.baseTemplate=`<${i}></${i}>`,h.IS_ID_SELECTOR.test(t.root)&&(t.root=document.getElementById(t.root.substring(1))),h.IS_ID_SELECTOR.test(t.template)&&(t.template=document.getElementById(t.template.substring(1)),t.template=t.template.innerHTML),!(t.root instanceof HTMLElement||t.root instanceof ShadowRoot))throw new TypeError("root must be an HTMLElement or an valid ID selector like #example-root");if(!t.mainComponent&&!(t.template instanceof HTMLElement||"string"==typeof t.template||"function"==typeof t.template))throw new TypeError("template must be a string or an HTMLElement or a function or an valid ID selector like #example-template");if(t.root.hasChildNodes){const e=t.root.firstElementChild;Y(e),e&&!e._dozAttach.walked&&e.parentNode.removeChild(e)}this.cfg=Object.assign({},{components:[],shared:{},useShadowRoot:!1,propsListener:null,propsListenerAsync:null,listeners:null,actions:{},autoDraw:!0,enableExternalTemplate:!1},t),Object.defineProperties(this,{createInstance:{value:De},_lastUId:{value:0,writable:!0},_components:{value:{},writable:!0},_usedComponents:{value:{},writable:!0},_cache:{value:new Map},_onAppReadyCB:{value:[],writable:!0},_onAppComponentsMounted:{value:new Map,writable:!0},_callAppReady:{value:function(){this._onAppReadyCB.forEach((e=>{"function"==typeof e&&e._instance&&e.call(e._instance)})),this._onAppReadyCB=[]}},_onAppDrawCB:{value:[],writable:!0},_onAppCB:{value:{},writable:!0},isWebComponent:{value:this.cfg.isWebComponent},byAppCreate:{value:this.cfg.byAppCreate},useShadowRoot:{value:this.cfg.useShadowRoot,writable:!0,enumerable:!0},_root:{value:this.cfg.root},appId:{value:window.DOZ_APP_ID||Math.random().toString(36).substring(2,15),enumerable:!0},appIntId:{value:je++,enumerable:!0},action:{value:e(this.cfg.actions,this),enumerable:!0},onAppEmit:{value:this.cfg.onAppEmit,writable:!0,enumerable:!0},shared:{value:this.cfg.shared,writable:!0,enumerable:!0},setAllAttributes:{value:this.cfg.setAllAttributes,writable:!0,enumerable:!0},onVdomUpdateElement:{value:this.cfg.onVdomUpdateElement,writable:!0,enumerable:!0},cacheStores:{value:{kCache:new Map,hCache:new Map},enumerable:!0},mount:{value:function(e,t,n=this._tree){if("string"==typeof t&&(t=document.querySelector(t)),!((t=t||n._rootElement)instanceof HTMLElement))throw new TypeError("root must be an HTMLElement or an valid selector like #example-root");const o={tag:s,cfg:{props:{},template:t=>e}};return this.createInstance({root:t,template:`<${s}></${s}>`,app:this,parentCmp:n,autoCmp:o,mount:!0})},enumerable:!0}}),Array.isArray(this.cfg.components)?this.cfg.components.forEach((e=>{"object"==typeof e&&"string"==typeof e.tag&&"object"==typeof e.cfg&&(this._components[e.tag]=e)})):"object"==typeof this.cfg.components&&Object.keys(this.cfg.components).forEach((e=>{this._components[e]={tag:e,cfg:this.cfg.components[e]}})),Ne.load(this),I.callAppInit(this),this.cfg.mainComponent?this._tree=this.createInstance({mountMainComponent:!0,root:this.cfg.root,component:this.cfg.mainComponent,app:this,innerHTML:this.cfg.innerHTML}):(this._components[i]={tag:i,cfg:{template:"function"==typeof t.template?t.template:function(){return t.template}}},Object.keys(t).forEach((e=>{["template","root"].includes(e)||(this._components[i].cfg[e]=t[e])}))),this.cfg.listeners&&Object.keys(this.cfg.listeners).forEach((e=>{this.on(e,this.cfg.listeners[e])})),!this.cfg.mainComponent&&this.cfg.autoDraw&&this.draw(),this.canAppReady()}canAppReady(){this._onAppComponentsMounted.size?setTimeout((()=>{this.canAppReady()})):(this._callAppReady(),this.emit("ready",this))}draw(){return this.cfg.autoDraw||(this.cfg.root.innerHTML=""),this._tree=this.createInstance({root:this.cfg.root,template:this.baseTemplate,app:this}),this}get mainComponent(){return this._tree}on(e,t){if("string"!=typeof e)throw new TypeError("Event must be a string");if("function"!=typeof t)throw new TypeError("Callback must be a function");return this._onAppCB[e]||(this._onAppCB[e]=[]),this._onAppCB[e].push(t),this}emit(e,...t){return this._onAppCB[e]&&this._onAppCB[e].forEach((e=>{e.apply(this,t)})),this.onAppEmit&&this.onAppEmit(e,...t),this}generateUId(){return this.appId+"-"+ ++this._lastUId}}function Ue(e,t={}){if("string"!=typeof e)throw new TypeError("Tag must be a string");if(!h.IS_CUSTOM_TAG.test(e))throw new TypeError("Tag must contain a dash (-) like my-component");y({tag:e,cfg:t})}function $e(e){Ee(ke.prototype,e)}function He(e,t,n){let o=Object.assign({root:e,mainComponent:t,byAppCreate:!0},n);return new xe(o)}var We=function(e){return function(t){t.tag=e}};function Ve(e,t,n=[],o="dwc",a,r=[],p=[]){f.webComponents.tags[e]=f.webComponents.tags[e]||{},o&&(o+="-"),customElements.define(o+e,class extends HTMLElement{static get observedAttributes(){return n}constructor(){super()}connectedCallback(){let o={},i=null,l="",s=this.hasAttribute("data-no-shadow"),c=s?this:this.attachShadow({mode:"open"}),d=this;for(let e,t=0,a=this.attributes,r=a.length;t<r;t++)e=a[t],"data-id"!==e.nodeName?n.includes(e.nodeName)&&(o[M(e.nodeName)]=e.nodeValue):i=e.nodeValue;let u=function(){let t=this.app.byAppCreate?this:this.children[0];r.forEach((e=>{t[e]&&(d[e]=t[e].bind(t))})),d.removeAttribute("data-soft-entrance"),t.props=Object.assign({},t.props,o);let n=Object.keys(f.webComponents.tags[e]).length++;if(f.webComponents.tags[e][i||n]=t,null!==i){if(f.webComponents.ids[i])return console.warn(i+": id already exists for DozWebComponent");f.webComponents.ids[i]=t}},h=function(e,...t){if(p.indexOf(e)>-1){let n=new CustomEvent(e,{detail:t});d.dispatchEvent(n)}};l=this.innerHTML.trim(),this.innerHTML="";let m=t||a||e;t&&"object"!=typeof t?(t.__postListeners={onAppReady:u},this.dozApp=He(c,t,{isWebComponent:!0,useShadowRoot:!s,innerHTML:l,onAppEmit:h})):this.dozApp=new xe({root:c,isWebComponent:!0,useShadowRoot:!s,template:e=>e`
                            <${m}>${l}</${m}>
                        `,onAppReady:u,onAppEmit:h})}attributeChangedCallback(e,t,n){if(!this.dozApp)return;(this.dozApp.byAppCreate?this.dozApp.mainComponent:this.dozApp.mainComponent.children[0]).props[M(e)]=n}})}function Fe(e,t,n=[],o=[],a=[]){Ve(e,t,n,"",null,o,a)}function qe(e,t,n=[],o=[],a=[]){Ve(e,null,n,"",t,o,a)}!function(){if(!document.getElementById("style--soft-entrance--")){const e=document.createElement("style");e.id="style--soft-entrance--",e.innerHTML="[data-soft-entrance] {visibility: hidden!important;}",document.head.appendChild(e)}}();const{directive:Ke}=I;const{directive:Ge}=I;const{directive:Ye}=I;const{directive:Qe}=I;const{directive:Ze}=I;Ze(":onbeforemount",{onComponentBeforeMount:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),Ze(":onmount",{onComponentMount(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),Ze(":onafterrender",{onComponentAfterRender:(e,t,n)=>"function"==typeof n?n(e,t):e.parent&&"function"==typeof e.parent[n]?e.parent[n].call(e.parent,e,t):void 0}),Ze(":onbeforeupdate",{onComponentBeforeUpdate:(e,t,n)=>"function"==typeof n?n(e,t):e.parent&&"function"==typeof e.parent[n]?e.parent[n].call(e.parent,e,t):void 0}),Ze(":onupdate",{onComponentUpdate(e,t,n){"function"==typeof n?n(e,t):e.parent&&"function"==typeof e.parent[n]&&e.parent[n].call(e.parent,e,t)}}),Ze(":onbeforeunmount",{onComponentBeforeUnmount:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),Ze(":onunmount",{onComponentUnmount(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),Ze(":onbeforedestroy",{onComponentBeforeDestroy:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),Ze(":ondestroy",{onComponentDestroy(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),Ze(":onloadprops",{onComponentLoadProps(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}});const{directive:Xe}=I;const{directive:Je}=I;const{directive:et}=I;function tt(e,t){e&&new Promise(e).then((()=>tt(t.shift(),t)))}const{directive:nt}=I;var ot=function(){nt("show",{onAppComponentCreate(e){},setVisible(e,t){const n=e._dozAttach.__animationDirectiveValue;e._dozAttach.__showOriginDisplay=function(e){if(!e._dozAttach.props||!e._dozAttach.props.style)return null;let t=e._dozAttach.props.style.match(h.EXTRACT_STYLE_DISPLAY_PROPERTY);return t?t[1]:null}(e)||"";let o=!1;void 0===e._dozAttach.__showInitialValue&&(e._dozAttach.__showInitialValue=t,o=!t),e._dozAttach.__prevValueOfShow!==t&&(e._dozAttach.__prevValueOfShow=t,n&&!o?(e._dozAttach.__animationsList||(e._dozAttach.__animationsList=[]),e._dozAttach.__animationUsedByShowDirective=!0,e._dozAttach.__animationsList.push((n=>{t?(e.style.display=e._dozAttach.__showOriginDisplay,e._dozAttach.__animationShow((()=>{e.style.display=e._dozAttach.__showOriginDisplay,e._dozAttach.__animationUsedByShowDirective=!1,n()}))):e._dozAttach.__animationHide((()=>{e.style.display="none",e._dozAttach.__animationUsedByShowDirective=!1,n()}))})),n.queue?e._dozAttach.__animationIsRunning||tt(e._dozAttach.__animationsList.shift(),e._dozAttach.__animationsList):new Promise(e._dozAttach.__animationsList.shift()).then()):e.style.display=t?e._dozAttach.__showOriginDisplay:"none")},onComponentDOMElementCreate(e,t,n){this.setVisible(t,n)},onComponentDOMElementUpdate(e,t,n){this.setVisible(t,n)}})};function at(e,t,n=1e3,o){let a,r=0,p=function(){window.cancelAnimationFrame(a),a=null},i=function(){if(r>=n)return console.warn("wait, max cycles exceeded "+n),void("function"==typeof o&&o());e(p)?(a&&p(),t()):(r++,a=window.requestAnimationFrame(i))};a=window.requestAnimationFrame(i)}function rt(e,t,n,o){if("function"==typeof n?(o=n,n={}):n||(n={}),"hide"===n.mode&&"none"===e.style.display)return;e._dozAttach.__animationIsRunning&&(e.classList.remove(e._dozAttach.__lastAnimationName),e._dozAttach.__animationIsRunning=!1,e._dozAttach.__lockedForAnimation=!1,e.removeEventListener("animationend",e._dozAttach.__handleAnimationEnd)),e._dozAttach.__animationIsRunning=!0;let a=window.getComputedStyle(e);function r(){e.classList.remove(n.classLib),e.classList.remove(t),e._dozAttach.__animationIsRunning=!1,e._dozAttach.__lockedForAnimation=!1,e.style.animationDelay="",e.style.webkitAnimationDelay="",e.style.mozAnimationDelay="",e.style.animationDuration="",e.style.webkitAnimationDuration="",e.style.mozAnimationDuration="",e.style.animationIterationCount="",e.style.webkitAnimationIterationCount="",e.style.mozAnimationIterationCount="",e.removeEventListener("animationend",r),"function"==typeof o&&o(),"function"==typeof n.cb&&n.cb()}n.classLib=n.classLib||"animated",e.classList.add(n.classLib),e.classList.add(t),e._dozAttach.__lastAnimationName=t,e._dozAttach.__animationOriginDisplay=a.display,"inline"===e._dozAttach.__animationOriginDisplay&&(e.style.display="inline-block"),n.delay&&(e.style.animationDelay=n.delay,e.style.webkitAnimationDelay=n.delay,e.style.mozAnimationDelay=n.delay),n.duration&&(e.style.animationDuration=n.duration,e.style.webkitAnimationDuration=n.duration,e.style.mozAnimationDuration=n.duration),n.iterationCount&&(e.style.animationIterationCount=n.iterationCount,e.style.webkitAnimationIterationCount=n.iterationCount,e.style.mozAnimationIterationCount=n.iterationCount),e.addEventListener("animationend",r),e._dozAttach.__handleAnimationEnd=r,e._dozAttach.__animationReset=()=>r()}window.requestAnimationFrame=window.requestAnimationFrame||window.setTimeout,window.cancelAnimationFrame=window.cancelAnimationFrame||window.clearTimeout;const{directive:pt}=I;const{directive:it}=I;var lt=function(){it("lazy",{onAppInit(e){e.lazyComponentsList=new Set,window.addEventListener("scroll",(()=>{e.lazyComponentsList.forEach((t=>{this.canRunMount(e,t)}))}))},onComponentCreate(e){e.waitMount=!0,e.appReadyExcluded=!0,e.app.lazyComponentsList.add(e)},onComponentWaitMount(e){this.canRunMount(e.app,e)},canRunMount(e,t){(function(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)})(t.$domEl)&&(t.runMount(),e.lazyComponentsList.delete(t))}})};const{directive:st}=I;Ke(":store",{createStore(e,t){if("string"==typeof t){if(void 0!==e.app._stores[t])throw new Error(`Store already defined: ${t}`);e.app._stores[t]=e.props,e.store=t}},syncStore(e,t){"string"==typeof t&&void 0!==e.app._stores[t]&&(e.app._stores[t]=e.props)},onAppInit(e){e._stores={},e.getStore=function(t){return e._stores[t]}},onAppComponentCreate(e){e.getStore=e.app.getStore,void 0!==e.store&&void 0===e.props["d:store"]&&this.createStore(e,e.store)},onComponentCreate(e,t){this.createStore(e,t)},onAppComponentLoadProps(e){this.syncStore(e,e.store)},onAppComponentSetProps(e){this.syncStore(e,e.store)},onAppComponentSetConfig(e,t){"string"==typeof t.store&&this.createStore(e,t.store)},onAppComponentDestroy(e){e.store&&e.app._stores[e.store]&&delete e.app._stores[e.store]}}),Ge(":id",{createId(e,t){"string"==typeof t&&(e.app._ids[t]=e,e.id=t)},onAppInit(e){e._ids={},e.getComponentById=function(t){return e._ids[t]}},onAppComponentCreate(e){e.getComponentById=function(t){return e.app._ids[t]},e.getCmp=e.getComponentById,void 0!==e.id&&void 0===e.props["d:id"]&&this.createId(e,e.id)},onComponentCreate(e,t){this.createId(e,t)},onAppComponentSetConfig(e,t){"string"==typeof t.id&&this.createId(e,t.id)},onAppComponentDestroy(e){e.id&&e.app._ids[e.id]&&delete e.app._ids[e.id]}}),Ye(":alias",{createAlias(e,t){"string"==typeof t&&(e.alias=t)},onAppInit(e){e.getComponent=function(e){return this._tree?this._tree.children[e]:void 0}},onAppComponentCreate(e){e.getComponent=function(e){return this.children?this.children[e]:void 0}},onComponentCreate(e,t){this.createAlias(e,t)},onAppComponentSetConfig(e,t){"string"==typeof t.alias&&this.createAlias(e,t.alias)},onAppComponentAssignIndex:(e,t)=>e.alias?e.alias:t}),Qe(":on-$event",{onAppComponentCreate(e){e._callback={},e.emit=function(t,...n){e._callback&&("function"==typeof e._callback[t]?e._callback[t].apply(e.parent,n):void 0!==e._callback[t]&&void 0!==e.parent[e._callback[t]]&&"function"==typeof e.parent[e._callback[t]]&&e.parent[e._callback[t]].apply(e.parent,n))}},onComponentCreate(e,t,n){let o={};o[n.event]=t,Object.assign(e._callback,o)}}),Ze(":onbeforecreate",{onComponentBeforeCreate:(e,t)=>"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]?e.parent[t].call(e.parent,e):void 0}),Ze(":oncreate",{onComponentCreate(e,t){"function"==typeof t?t(e):e.parent&&"function"==typeof e.parent[t]&&e.parent[t].call(e.parent,e)}}),Xe("ref",{onAppComponentCreate(e){e.ref={}},onComponentDOMElementCreate(e,t,n){e.ref[n]=t}}),Je("is",{hasDataIs:e=>e._dozAttach.props&&e._dozAttach.props["d-is"],onAppComponentAssignName(e,t){if(this.hasDataIs(t))return t._dozAttach.props["d-is"]},onAppComponentPropsAssignName(e,t,n){if(this.hasDataIs(e))return M(t)},onComponentDOMElementCreate(e,t,n,o){t.dataset.is=n,Me(e,t)}}),et("bind",{onAppComponentCreate(e){e._boundElements={}},onAppComponentUpdate(e,t){Object.keys(e._boundElements).length&&this.updateBoundElementsByChanges(e,t)},onAppComponentLoadProps(e){this.updateBoundElementsByPropsIteration(e)},onComponentDOMElementCreate(e,t,n,o){this.canBind(t)&&this.setBind(e,t,n)},canBind:e=>-1!==["INPUT","TEXTAREA","SELECT"].indexOf(e.nodeName),setBind(e,t,n){void 0!==e.props[n]&&(["compositionstart","compositionend","input","change"].forEach((function(o){t.addEventListener(o,(function(t){let o;"checkbox"===this.type?this.defaultValue?(o=[...e.appRoot.querySelectorAll(`input[name=${this.name}][type=checkbox]:checked`)].map((e=>e.value)),e.props[n]=o):e.props[n]=this.checked:(o=this.value,this.multiple&&(o=[...this.options].filter((e=>e.selected)).map((e=>e.value))),e.props[n]=o)}))})),void 0!==e._boundElements[n]?e._boundElements[n].push(t):e._boundElements[n]=[t],H((()=>{this.updateBoundElement(t,e.props[n],e)})))},updateBoundElementsByChanges(e,t){t.forEach((t=>{let n=t.newValue,o=t.property;this.updateBoundElements(e,n,o)}))},updateBoundElementsByPropsIteration(e){let t=this;!function n(o){let a=Object.keys(o);for(let r=0,p=a.length;r<p;r++){let p=a[r];o[p]instanceof Object&&null!==o[p]?n(o[p]):t.updateBoundElements(e,o[p],p)}}(e._rawProps)},updateBoundElements(e,t,n){Object.prototype.hasOwnProperty.call(e._boundElements,n)&&e._boundElements[n].forEach((n=>{this.updateBoundElement(n,t,e)}))},updateBoundElement(e,t,n){"checkbox"===e.type?e.defaultValue?Array.isArray(t)&&[...n.appRoot.querySelectorAll(`input[name=${e.name}][type=checkbox]`)].forEach((e=>e.checked=t.includes(e.value))):e.checked=t:"radio"===e.type?e.checked=e.value===t:"select-multiple"===e.type&&Array.isArray(t)?[...e.options].forEach((e=>e.selected=t.includes(e.value))):e.value=t}}),ot(),pt("animate",{onAppComponentCreate(e){e.animate=rt,e.elementsWithAnimation=new Map},createLockRemoveInstanceByCallback(e){e.lockRemoveInstanceByCallback=(t,...n)=>{if(e.lockRemoveInstanceByCallbackIsCalled)return;e.lockRemoveInstanceByCallbackIsCalled=!0;let o=[];for(let[t,n]of e.elementsWithAnimation){let a=t,r=n;o.push(new Promise((t=>{if(!document.body.contains(a))return t();at((e=>a._dozAttach.__animationUsedByShowDirective?(e(),!0):!a._dozAttach.__animationIsRunning),(()=>{let n={duration:r.hide.duration,delay:r.hide.delay,iterationCount:r.hide.iterationCount,cb:r.hide.cb,classLib:r.classLib};e.animate(a,r.hide.name,n,(()=>{a.style.display="none",t()}))}),1e3,(()=>{a._dozAttach.__animationReset()}))})))}Promise.all(o).then((()=>{e.lockRemoveInstanceByCallback=null,e.lockRemoveInstanceByCallbackIsCalled=!1,t.apply(e,n)}),(e=>{throw new Error(e)}))}},createAnimations(e,t,n){if(!t._dozAttach.__lockedForAnimation){if(t._dozAttach.__lockedForAnimation=!0,"string"==typeof n&&(n={show:n,hide:n}),t._dozAttach.__animationDirectiveValue=n,n.show){"object"!=typeof n.show&&(n.show={name:n.show});let o={duration:n.show.duration,delay:n.show.delay,iterationCount:n.show.iterationCount,cb:n.show.cb,classLib:n.classLib,mode:"show"};t._dozAttach.__animationShow=a=>e.animate(t,n.show.name,o,a),at((e=>t._dozAttach.__animationUsedByShowDirective?(e(),!0):!t._dozAttach.__animationIsRunning),(()=>{document.body.contains(t)&&(t._dozAttach.__animationOriginDisplay&&(t.style.display=t._dozAttach.__animationOriginDisplay),"none"!==t.style.display&&e.animate(t,n.show.name,o))}),1e3,(()=>{t._dozAttach.__animationReset()}))}if(n.hide){"object"!=typeof n.hide&&(n.hide={name:n.hide});let o={duration:n.hide.duration,delay:n.hide.delay,iterationCount:n.hide.iterationCount,cb:n.hide.cb,classLib:n.classLib,mode:"hide"};t._dozAttach.__animationHide=a=>e.animate(t,n.hide.name,o,a),this.createLockRemoveInstanceByCallback(e)}e.elementsWithAnimation.set(t,n),setTimeout((()=>{Object.keys(e.children).forEach((t=>{const n=e.children[t],o=n.getHTMLElement(),a=e.elementsWithAnimation.get(o);a&&(n.lockRemoveInstanceByCallback||(n.elementsWithAnimation.set(o,a),this.createLockRemoveInstanceByCallback(n)))}))}))}},onComponentDOMElementCreate(e,t,n){this.createAnimations(e,t,n)},onAppComponentMount(e){if(e.elementsWithAnimation&&e.elementsWithAnimation.size)for(let[t,n]of e.elementsWithAnimation)this.createAnimations(e,t,n)}}),lt(),Object.defineProperties(xe,{collection:{value:C,enumerable:!0},compile:{value:x,enumerable:!0},Component:{value:ke,enumerable:!0},component:{value:Ue,enumerable:!0},define:{value:Ue,enumerable:!0},h:{value:we,enumerable:!0},update:{value:de,enumerable:!0},mixin:{value:$e,enumerable:!0},use:{value:Le,enumerable:!0},directive:{value:st,enumerable:!0},version:{value:"5.0.0",enumerable:!0},tag:{value:We,enumerable:!0},createDozWebComponent:{value:Ve,enumerable:!0},defineWebComponent:{value:Fe,enumerable:!0},defineWebComponentFromGlobal:{value:qe,enumerable:!0},appCreate:{value:He,enumerable:!0},createInstance:{value:De,enumerable:!0}});const ct=xe.version;export{ke as Component,He as appCreate,C as collection,x as compile,Ue as component,Ve as createDozWebComponent,De as createInstance,xe as default,Ue as define,Fe as defineWebComponent,qe as defineWebComponentFromGlobal,st as directive,we as h,$e as mixin,We as tag,de as update,Le as use,ct as version};
