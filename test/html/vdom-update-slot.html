<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Doz - vdom update</title>
    <script src="../../dist/doz.js?58900234c12740654888"></script>
    <style>
        body {
            font-family: sans-serif;
        }

        button {
            padding: 20px;
            font-size: 20px;
        }
    </style>
</head>
<body>
<div id="app"></div>

<script>

    Doz.component('x-cmp', {
        template(h) {
            return h`
                <div>
                    <button onclick="this.selectedIndex(true)">Enable</button>
                    <button onclick="this.selectedIndex(false)">Disable</button>
                </div>
            `
        },
        selectedIndex(v) {
            this.getStore('buttonGroup').button1 = v;
            //this.getStore('buttonGroup').button2 = v;
        }
    });

    Doz.component('button-group', {
        //store: 'buttonGroup',
        props: {
            button1: false,
            button2: false,
            button3: false,
        },
        template(h) {
            return h`
                <div>
                    <button type="button" ${this.props.button1 ? 'disabled="false"' : 'disabled="true"'}>button 1 - ${this.props.button1}</button>
                    <p>hello</p>
                </div>
            `
        },
        onCreate() {
            console.log('on create')
        },
        onUnmount() {
            console.log('destroy')
        }
    });

    new Doz({
        root: '#app',
        props: {
            time: Date.now(),
            even: false
        },
        template(h) {
            return h`
                <x-cmp/>oooooo o oo o o${this.props.even ? 'aaaaaa' : ''} ${this.props.time}
                <div>a</div>
                <button-group d:store="buttonGroup"></button-group>
            `;
        },
        onMount() {
            setInterval(() => {
                this.props.time = Date.now();
                this.props.even = !this.props.even;
            }, 1000)
        }
    });

</script>
</body>
</html>