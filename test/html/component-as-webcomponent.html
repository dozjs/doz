<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="DOZ - Clock">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Doz - component as web-component</title>
    <script src="../../dist/doz.js?589654284e3"></script>
    <style>
        body {
            font-family: sans-serif;
        }
    </style>
</head>
<body>

<script>

    const {component, createExtWebComponent} = Doz;

    component('doz-clock', {
        template(h){
            return h`
                <style>
                    div {
                        font-size: 35px;
                        padding: 20px;
                        text-align: center;
                    }
                </style>
                <div style="color: ${this.props.color}">
                    ${this.props.title}: ${this.props.time}
                </div>
            `
        },
        props: {
            title: 'the time',
            time: '--:--:--',
            color: 'black'
        },
        onMount() {
            setInterval(() => this.currentTime(), 1000)
        },
        currentTime() {
            this.props.time = new Date().toLocaleTimeString();
            this.props.color = this.props.color === 'violet' ? 'red' : 'violet';
        }
    });

    let myText = {
        template(h) {
            return h`
                <div>Hello</div>
                <button onclick="this.myClick()">get ext wc</button>
            `
        },
        myClick() {
            this.getExtWebComponentById('my-instance').props.title = Math.random();
        }
    }

    createExtWebComponent('doz-clock');
    createExtWebComponent('my-text', myText);

</script>

<ext-doz-clock data-id="my-instance" title="my time"></ext-doz-clock>
<ext-doz-clock></ext-doz-clock>
<ext-doz-clock></ext-doz-clock>
<ext-my-text></ext-my-text>
</body>
</html>